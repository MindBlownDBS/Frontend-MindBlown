/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{checkAuthenticatedRoute:()=>x,checkProtectedRoute:()=>k,checkUnauthenticatedRouteOnly:()=>b,getAccessToken:()=>y,getLogout:()=>E,putAccessToken:()=>m,removeAccessToken:()=>g});var r={};function n(t){var e=t.skipTransition,r=void 0!==e&&e,n=t.updateDOM;if(r||!document.startViewTransition){var o=Promise.resolve(n()).then((function(){}));return{ready:Promise.reject(Error("View transitions unsupported")),updateCallbackDone:o,finished:o}}return document.startViewTransition(n)}function o(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"}t.r(r),t.d(r,{checkTodayEntry:()=>J,commentOnStory:()=>at,getEntryByDate:()=>Y,getLogin:()=>H,getNotifications:()=>lt,getRegister:()=>U,getStories:()=>Q,getStoryDetail:()=>nt,getUserProfile:()=>et,likeStory:()=>ot,markAllNotificationsAsRead:()=>pt,markNotificationAsRead:()=>ht,postStory:()=>Z,saveEntry:()=>V,updateProfile:()=>st});var i=function(){return'\n    <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">\n        <h2 class="text-2xl font-semibold mb-4">Login Diperlukan</h2>\n        <p class="text-gray-600 mb-6">Silakan login untuk mengakses fitur ini.</p>\n        <div class="flex justify-end gap-4">\n            <button id="cancel-login" class="px-4 py-2 text-gray-600 hover:text-gray-800">Batal</button>\n            <button id="go-to-login" class="px-4 py-2 bg-third text-white rounded-lg hover:bg-third/80">Login</button>\n        </div>\n    </div>\n'};function a(t){return'\n        <div class="flex justify-end mb-3">\n            <div class="flex flex-row-reverse items-start gap-2 max-w-[80%]">\n                <div class="bg-[#7de3e1] px-4 py-2 rounded-lg text-sm text-gray-800 text-left">\n                    '.concat(t,"\n                </div>\n            </div>\n        </div>\n    ")}function u(t){return'\n        <div class="flex justify-start mb-3">\n            <div class="flex items-start max-w-[80%]">\n                <div class="w-8 h-8 rounded-lg bg-white flex items-center justify-center">\n                    <img src="images/logo.png" alt="Bot" class="w-7 h-7 lg:w-8 lg:h-8 object-cover">\n                </div>\n                <div class="bg-white px-3 py-2 rounded-lg text-sm text-gray-800 text-left">\n                    '.concat(t,"\n                </div>\n            </div>\n        </div>\n    ")}function s(t){var e=[40,10,60,35,50,25,45,0],r=200*(t.length-1)+40,n=65*(Math.min(4,t.length)-1)+40,o=t.map((function(t,r){var n=e[r]||40;return"".concat(20+200*r,",").concat(n)})).join(" "),i=t.slice(0,4).map((function(t,r){var n=e[r]||40;return"".concat(20+65*r,",").concat(n)})).join(" ");return'\n    <div class="bg-white rounded-xl border border-gray-200 p-4 mt-6 mb-8">\n      <div class="flex items-center justify-between">\n        <button class="rounded-full border border-gray-300 w-8 h-8 flex items-center justify-center text-gray-500 hover:bg-gray-100" id="moodPrevBtn">\n          &larr;\n        </button>\n        <div class="flex-1 flex flex-col items-center">\n          \x3c!-- Desktop View --\x3e\n          <div class="hidden lg:block" style="position:relative; width:'.concat(r,"px; height:").concat(120,'px;">\n            <svg width="').concat(r,'" height="').concat(80,'" style="position:absolute;top:0;left:0;">\n              <polyline\n                fill="none"\n                stroke="#bbb"\n                stroke-width="2"\n                points="').concat(o,'"\n              />\n            </svg>\n            ').concat(t.map((function(t,r){var n=20+200*r,o=e[r]||40;return'\n                <div style="position:absolute;left:'.concat(n-18,"px;top:").concat(o-18,'px;width:36px;height:36px;display:flex;flex-direction:column;align-items:center;">\n                  <span style="font-size:2rem;line-height:1;">').concat(t.emoji,'</span>\n                </div>\n                <div style="position:absolute;left:').concat(n-30,"px;top:").concat(85,'px;width:60px;text-align:center;font-size:12px;color:#666;">\n                  ').concat(t.date,"\n                </div>\n              ")})).join(""),'\n          </div>\n\n          \x3c!-- Mobile View --\x3e\n          <div class="lg:hidden" style="position:relative; width:').concat(n,"px; height:").concat(120,'px;">\n            <svg width="').concat(n,'" height="').concat(80,'" style="position:absolute;top:0;left:0;">\n              <polyline\n                fill="none"\n                stroke="#bbb"\n                stroke-width="2"\n                points="').concat(i,'"\n              />\n            </svg>\n            ').concat(t.slice(0,4).map((function(t,r){var n=20+65*r,o=e[r]||40;return'\n                <div style="position:absolute;left:'.concat(n-18,"px;top:").concat(o-18,'px;width:36px;height:36px;display:flex;flex-direction:column;align-items:center;">\n                  <span style="font-size:1.5rem;line-height:1;">').concat(t.emoji,'</span>\n                </div>\n                <div style="position:absolute;left:').concat(n-30,"px;top:").concat(85,'px;width:60px;text-align:center;font-size:12px;color:#666;">\n                  ').concat(t.date,"\n                </div>\n              ")})).join(""),'\n          </div>\n        </div>\n        <button class="rounded-full border border-gray-300 w-8 h-8 flex items-center justify-center text-gray-500 hover:bg-gray-100" id="moodNextBtn">\n          &rarr;\n        </button>\n      </div>\n    </div>\n  ')}function c(t){var e,r,n,o,i,a=t.id,u=void 0===a?"":a,s=t.icon,c=void 0===s?"images/logo.png":s,l=t.title,f=void 0===l?"":l,h=t.message,d=void 0===h?"":h,p=t.read,v=void 0!==p&&p,y=t.createdAt,m=void 0===y?"":y,g=m?(e=new Date(m),r=new Date-e,n=Math.floor(r/6e4),o=Math.floor(r/36e5),i=Math.floor(r/864e5),n<1?"Baru saja":n<60?"".concat(n," menit yang lalu"):o<24?"".concat(o," jam yang lalu"):i<7?"".concat(i," hari yang lalu"):e.toLocaleDateString("id-ID")):"";return'\n    <div class="flex items-start gap-3 py-4 border-b border-gray-200 cursor-pointer hover:bg-gray-50 '.concat(v?"opacity-60":"",'" \n         data-notification-id="').concat(u,'">\n      <div class="w-8 h-8 flex-shrink-0 flex items-center justify-center">\n        <img src="').concat(c,'" alt="icon" class="w-7 h-7 object-cover">\n      </div>\n      <div class="text-left flex-1">\n        <div class="flex justify-between items-start">\n          <div class="font-semibold text-base text-gray-800 mb-1">').concat(f,"</div>\n          ").concat(v?"":'<div class="w-2 h-2 bg-third rounded-full flex-shrink-0"></div>','\n        </div>\n        <div class="text-sm text-gray-700 leading-snug mb-1">').concat(d,"</div>\n        ").concat(g?'<div class="text-xs text-gray-500">'.concat(g,"</div>"):"","\n      </div>\n    </div>\n  ")}function l(t){var e=t.username,r=void 0===e?"Pengguna":e,n=t.handle,o=void 0===n?"Anonim":n,i=t.content,a=void 0===i?"":i,u=(t.isAnonymous,t.likeCount),s=void 0===u?0:u,c=t.commentCount,l=void 0===c?0:c,f=t.viewCount,h=void 0===f?0:f,d=t.storyId,p=void 0===d?"":d,v=t.profilePicture,y=void 0===v?"./images/image.png":v;return'\n    <div class="story-container flex items-start gap-3 py-3 border-b border-gray-200 max-w-2xl" data-story-id="'.concat(p,'">\n      <div class="w-10 h-10 flex-shrink-0 user-info">\n        <img src="').concat(y,'" alt="icon" class="w-10 h-10 object-cover rounded-full" />\n      </div>\n\n      <div class="flex flex-col text-left story-content">\n        <div class="user-info">\n          <div class="font-semibold text-base text-gray-800">').concat(r,'</div>\n          <div class="text-sm text-gray-500">').concat(o,'</div>\n          </div>\n          <p class="text-gray-700 mt-3 text-sm leading-relaxed">').concat(a,'</p>\n\n        <div class="flex items-center gap-30 mt-3">\n        <button class="like-btn flex items-center gap-1" data-story-id="').concat(p,'">\n            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>\n            <span class="like-count text-sm">').concat(s,'</span>\n          </button>\n          <button class="comment-btn flex items-center gap-1" data-story-id="').concat(p,'">\n            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>\n            <span class="comment-count text-sm">').concat(l,'</span>\n          </button>\n          <button class="view-btn flex items-center gap-1" data-story-id="').concat(p,'">\n            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 flex-shrink-0  height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M8 17c-.55 0-1-.45-1-1v-5c0-.55.45-1 1-1s1 .45 1 1v5c0 .55-.45 1-1 1zm4 0c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v8c0 .55-.45 1-1 1zm4 0c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm2 2H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm1-16H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>\n            <span class="view-count text-sm">').concat(h,"</span>\n          </button>\n          </div>\n      </div>\n    </div>\n  ")}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.username,r=void 0===e?"Nama Pengguna":e,n=t.handle,o=void 0===n?"@namapengguna":n,i=t.profilePicture;return'\n    <form id="chat-form" class="mt-auto sticky">\n    <div class="flex items-start gap-3 py-4 border-gray-200 max-w-2xl">\n    <div class="w-10 h-10 flex-shrink-0">\n        <img src="'.concat(void 0===i?"./images/image.png":i,'" alt="icon" class="w-10 h-10 object-cover rounded-full" />\n      </div>\n\n      <div class="flex flex-col text-left w-full">\n      <div>\n        <div class="font-semibold text-base text-gray-800">').concat(r,'</div>\n        <div class="text-sm text-gray-500 mb-4">').concat(o,'</div>\n      </div>\n      <div class="relative w-full z-50 w-full max-w-2xl mx-auto">\n        <textarea \n          id="chat-input"\n          class="text-[#8c8c8c] w-full h-24 px-4 py-3 pr-14 rounded-3xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent overflow-hidden"\n          placeholder="Ada cerita apa?..."></textarea>\n        <button class="absolute right-3 top-1/2 transform -translate-y-1/2 rounded-full bg-[#eee] p-2 w-25 text-white py-2 mt-2 hover:bg-teal-500 justify-end" type="submit">Unggah</button>\n      </div>\n      <div class="mt-2 flex items-center">\n        <input type="checkbox" id="post-anonymously" class="mr-2">\n        <label for="post-anonymously" class="text-sm text-gray-600">Unggah sebagai anonim</label>\n      </div>\n    </div>\n    </form>\n  ')}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.username,r=void 0===e?"Nama Pengguna":e,n=t.handle,o=void 0===n?"@namapengguna":n,i=t.profilePicture;return'\n    <form id="comment-form" class="sticky top-4">\n      <div class="flex items-start gap-3 py-4 border-gray-200 max-w-2xl">\n        <div class="w-10 h-10 flex-shrink-0">\n          <img src="'.concat(void 0===i?"./images/image.png":i,'" alt="icon" class="w-10 h-10 object-cover rounded-full" />\n        </div>\n\n        <div class="flex flex-col text-left w-full">\n          <div>\n            <div class="font-semibold text-base text-gray-800">').concat(r,'</div>\n            <div class="text-sm text-gray-500 mb-4">').concat(o,'</div>\n          </div>\n          <div class="relative w-full z-50">\n            <textarea \n              id="comment-input"\n              class="text-[#8c8c8c] w-full h-24 px-4 py-3 pr-14 rounded-3xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent overflow-hidden"\n              placeholder="Tulis komentar Anda..."></textarea>\n            <button class="absolute right-3 top-1/2 transform -translate-y-1/2 rounded-full bg-[#eee] p-2 w-25 text-white py-2 mt-2 hover:bg-teal-500 justify-end" type="submit">Unggah</button>\n          </div>\n        </div>\n      </div>\n    </form>\n  ')}function d(){return r=location.hash.replace("#","")||"/",n=r.split("/"),t={resource:n[1]||null,id:n[2]||null},e="",t.resource&&(e=e.concat("/".concat(t.resource))),t.id&&(e=e.concat("/:id")),e||"/";var t,e,r,n}var p="accessToken",v="http://localhost:5000";function y(){try{var t=localStorage.getItem(p);return"null"===t||"undefined"===t?null:t}catch(t){return console.error("getAccessToken: error:",t),null}}function m(t){try{return localStorage.setItem(p,t),!0}catch(t){return console.error("putAccessToken: error:",t),!1}}function g(){try{return localStorage.removeItem(p),!0}catch(t){return console.error("getLogout: error:",t),!1}}var w=["/login","/register"];function b(t){var e=d(),r=!!y();return w.includes(e)&&r?(location.hash="/",null):t}function x(t){return y()?t:(location.hash="/login",null)}function k(t){var e;return y()?t:(window.location.hash,(e=document.createElement("div")).className="fixed inset-0 bg-black/70 flex items-center justify-center z-50",e.innerHTML=i(),document.body.appendChild(e),document.getElementById("cancel-login").addEventListener("click",(function(){e.remove(),window.history.back()})),document.getElementById("go-to-login").addEventListener("click",(function(){e.remove(),window.location.hash="/login"})),null)}function E(){g()}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function S(){S=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new O(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(P([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==j(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function O(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function P(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(j(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=P,O.prototype={constructor:O,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:P(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function O(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function P(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){O(i,n,o,a,u,"next",t)}function u(t){O(i,n,o,a,u,"throw",t)}a(void 0)}))}}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T(n.key),n)}}function T(t){var e=function(t){if("object"!=j(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}function I(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var N=new WeakSet,L=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}(this,N)},e=[{key:"render",value:(n=P(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="md:ml-16 h-150 lg:min-h-screen flex items-center">\n        <div class="w-full flex items-center pb-20"> \n            <div class="max-w-2xl w-full mx-auto text-center">\n                <img src="images/logo.png" alt="Logo" class="w-27 h-27 mx-auto mb-3 lg:mb-10 mt-30">\n                <h1 class="text-primary lg:text-3xl text-2xl font-semibold mb-1">Hai, aku MindBlown!</h1>\n                <p class="text-secondary mb-8 lg:text-lg text-sm px-10 lg:px-0">Apa pun yang kamu rasain sekarang, itu valid. Mau cerita sedikit?</p>\n\n                <div id="chat-container" class="flex flex-col gap-2 px-4"></div>\n                \n                <form id="chat-form" class="relative mx-4 lg:mx-0 flex flex-col gap-2">\n                    <textarea \n                      id="chat-input"\n                      class="text-[#8c8c8c] w-full h-16 lg:h-24 px-4 py-3 pr-14 rounded-3xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent overflow-hidden   placeholder:leading-[2rem] lg:placeholder:leading-[4rem]"\n                      placeholder="Cerita sedikit..."></textarea>\n                    <button class="absolute right-3 top-1/2 transform -translate-y-1/2 rounded-full bg-[#eee] p-2 flex items-center justify-center hover:bg-third focus:bg-third transition cursor-pointer">\n                       <svg xmlns="http://www.w3.org/2000/svg"  class="w-6 h-6 text-white" fill="none" viewBox="-0.5 -0.5 16 16" stroke-linecap="round" stroke-linejoin="round" stroke="white" id="Send--Streamline-Mynaui" height="16" width="16">\n                        <path d="m8.75 6.25 -1.875 1.875m5.805 -6.230625a0.33437500000000003 0.33437500000000003 0 0 1 0.42500000000000004 0.42562500000000003l-3.7025 10.58125a0.33437500000000003 0.33437500000000003 0 0 1 -0.62125 0.025l-2.011875 -4.52625a0.33375 0.33375 0 0 0 -0.169375 -0.169375l-4.52625 -2.0125a0.33437500000000003 0.33437500000000003 0 0 1 0.025 -0.620625z" stroke-width="1"></path>\n                    </svg>\n                    </button>\n                </form>\n            </div>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(r=P(S().mark((function t(){var e;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y()||sessionStorage.getItem("welcomeModalShown")||I(N,this,B).call(this),(e=document.getElementById("chat-input")).addEventListener("input",(function(){return o(e)})),I(N,this,G).call(this);case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}],e&&_(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function G(){document.getElementById("chat-form").addEventListener("submit",(function(t){t.preventDefault();var e=document.getElementById("chat-input").value.trim();e&&(localStorage.setItem("pendingChatMessage",e),window.location.hash="/chatbot")}))}function B(){if(!document.getElementById("welcome-modal")){var t=document.createElement("div");t.id="welcome-modal",t.innerHTML='\n  <div class="fixed inset-0 bg-black/70 flex items-center justify-center z-50">\n    <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4 text-center">\n      <h2 class="text-2xl font-semibold mb-2">Selamat Datang</h2>\n      <p class="text-gray-600 mb-5 text-sm">\n         Masuk atau daftar untuk menikmati lebih banyak fitur unggulan dari kami ...\n      </p>\n      <button id="welcome-login" class="w-full py-2 mb-3 rounded-full bg-third text-white font-semibold border-2 border-third hover:bg-third/80 transition">Log in</button>\n      <button id="welcome-signup" class="w-full py-2 mb-3 rounded-full border-2 border-third text-black font-semibold hover:bg-gray-100 transition">Sign up</button>\n      <a href="#" id="welcome-stay-logged-out" class="text-gray-500 underline text-sm">Lewati untuk sekarang</a>\n    </div>\n  </div>\n',document.body.appendChild(t),sessionStorage.setItem("welcomeModalShown","true"),document.getElementById("welcome-login").onclick=function(){t.remove(),window.location.hash="/login"},document.getElementById("welcome-signup").onclick=function(){t.remove(),window.location.hash="/register"},document.getElementById("welcome-stay-logged-out").onclick=function(e){e.preventDefault(),t.remove()}}}function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function M(){M=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==A(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(A(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function F(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function C(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){F(i,n,o,a,u,"next",t)}function u(t){F(i,n,o,a,u,"throw",t)}a(void 0)}))}}var D="/mind-tracker",z="/notifications/read-all";function U(t,e,r,n){return q.apply(this,arguments)}function q(){return(q=C(M().mark((function t(e,r,n,o){var i,a,u;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=JSON.stringify({username:e,name:r,email:n,password:o}),t.next=3,fetch("".concat(v).concat("/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:i});case 3:return a=t.sent,t.next=6,a.json();case 6:return u=t.sent,t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(t,e){return R.apply(this,arguments)}function R(){return(R=C(M().mark((function t(e,r){var n,o,i;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.stringify({usernameOrEmail:e,password:r}),t.next=3,fetch("".concat(v).concat("/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:n});case 3:return o=t.sent,t.next=6,o.json();case 6:return i=t.sent,t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(){return W.apply(this,arguments)}function W(){return(W=C(M().mark((function t(){var e,r,n,o,i;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=localStorage.getItem("accessToken")){t.next=3;break}throw new Error("Anda belum login. Silakan login terlebih dahulu.");case 3:return r=new Date,n=r.toISOString().split("T")[0],t.next=7,fetch("".concat(v).concat("/mind-tracker/check","/").concat(n),{headers:{Authorization:"Bearer ".concat(e)}});case 7:return o=t.sent,t.next=10,o.json();case 10:if(i=t.sent,!o.error){t.next=13;break}throw new Error(i.message||"Terjadi kesalahan saat mengecek data");case 13:return t.abrupt("return",i);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(t){return K.apply(this,arguments)}function K(){return(K=C(M().mark((function t(e){var r,n,o,i;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=localStorage.getItem("accessToken")){t.next=3;break}throw new Error("Anda belum login. Silakan login terlebih dahulu.");case 3:return n=new Date(e),o=n.toISOString().split("T")[0],t.next=7,fetch("".concat(v).concat(D,"/").concat(o),{headers:{Authorization:"Bearer ".concat(r)}});case 7:return i=t.sent,t.next=10,i.json();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(t){return $.apply(this,arguments)}function $(){return($=C(M().mark((function t(e){var r,n,o;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=localStorage.getItem("accessToken")){t.next=3;break}throw new Error("Anda belum login. Silakan login terlebih dahulu.");case 3:return t.next=5,fetch("".concat(v).concat(D),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)});case 5:return n=t.sent,t.next=8,n.json();case 8:if(o=t.sent,!n.error){t.next=11;break}throw new Error(o.message||"Terjadi kesalahan saat menyimpan data");case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(){return X.apply(this,arguments)}function X(){return(X=C(M().mark((function t(){var e,r;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=y(),t.prev=1,t.next=4,fetch("".concat(v,"/stories"),{headers:{Authorization:"Bearer ".concat(e)}});case 4:return r=t.sent,t.next=7,r.json();case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(1),console.error("Error fetching stories:",t.t0),t.abrupt("return",{error:!0,message:"Gagal menampilkan cerita"});case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function Z(t){return tt.apply(this,arguments)}function tt(){return tt=C(M().mark((function t(e){var r,n,o,i,a=arguments;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>1&&void 0!==a[1]&&a[1],t.prev=1,n=y()){t.next=5;break}throw new Error("No authentication token found");case 5:return t.next=7,fetch("".concat(v,"/stories"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({content:e,isAnonymous:r})});case 7:return o=t.sent,t.next=10,o.json();case 10:if(i=t.sent,o.ok){t.next=13;break}throw new Error(i.message||"Gagal mengunggah cerita");case 13:return t.abrupt("return",i);case 16:throw t.prev=16,t.t0=t.catch(1),console.error("Error posting story:",t.t0),t.t0;case 20:case"end":return t.stop()}}),t,null,[[1,16]])}))),tt.apply(this,arguments)}function et(t){return rt.apply(this,arguments)}function rt(){return(rt=C(M().mark((function t(e){var r,n,o;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=y()){t.next=3;break}throw new Error("Anda belum login. Silakan login terlebih dahulu.");case 3:return t.next=5,fetch("".concat(v,"/profile/").concat(e),{headers:{Authorization:"Bearer ".concat(r)}});case 5:return n=t.sent,t.next=8,n.json();case 8:if(o=t.sent,!n.error){t.next=11;break}throw new Error(o.message||"Terjadi kesalahan saat mengambil profil");case 11:return t.abrupt("return",o);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var nt=function(){var t=C(M().mark((function t(e){var r,n,o,i;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e&&"undefined"!==e){t.next=3;break}return t.abrupt("return",{error:!0,message:"Invalid story ID. Story ID is required."});case 3:return t.next=5,fetch("".concat(v,"/stories/").concat(e),{headers:{Authorization:"Bearer ".concat(y())}});case 5:if(r=t.sent,(n=r.headers.get("content-type"))&&n.includes("application/json")){t.next=12;break}return t.next=10,r.text();case 10:throw o=t.sent,new Error("Expected JSON but got: ".concat(o.substring(0,100),"..."));case 12:return t.next=14,r.json();case 14:if(i=t.sent,r.ok){t.next=17;break}return t.abrupt("return",{error:!0,message:i.message||"Failed to fetch story"});case 17:return t.abrupt("return",i);case 20:return t.prev=20,t.t0=t.catch(0),console.error("Error fetching story detail:",t.t0),t.abrupt("return",{error:!0,message:t.t0.message||"Network error while fetching story"});case 24:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}();function ot(t){return it.apply(this,arguments)}function it(){return(it=C(M().mark((function t(e){var r,n,o;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw new Error("Invalid story ID");case 3:if(r=y()){t.next=6;break}throw new Error("Authentication required");case 6:return t.next=8,fetch("".concat(v,"/stories/").concat(e,"/likes"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 8:return n=t.sent,t.next=11,n.json();case 11:if(o=t.sent,n.ok){t.next=14;break}throw new Error(o.message||"Failed to like story");case 14:return t.abrupt("return",o.likeCount);case 17:throw t.prev=17,t.t0=t.catch(0),console.error("Failed to like story:",t.t0),t.t0;case 21:case"end":return t.stop()}}),t,null,[[0,17]])})))).apply(this,arguments)}function at(t,e){return ut.apply(this,arguments)}function ut(){return(ut=C(M().mark((function t(e,r){var n;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(v,"/stories/").concat(e,"/comments"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(y())},body:JSON.stringify({content:r})});case 2:return n=t.sent,t.next=5,n.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function st(t){return ct.apply(this,arguments)}function ct(){return(ct=C(M().mark((function t(e){var r,n,o;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(r=localStorage.getItem("accessToken"))&&"string"==typeof r&&r.includes(".")){t.next=4;break}throw new Error("Invalid token structure");case 4:return t.next=6,fetch("".concat(v,"/profile"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)});case 6:return n=t.sent,t.next=9,n.json();case 9:if(o=t.sent,n.ok){t.next=12;break}return t.abrupt("return",{error:!0,message:o.message||"Failed to update profile"});case 12:return t.abrupt("return",o);case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",{error:!0,message:t.t0.message||"Network error occurred"});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}function lt(){return ft.apply(this,arguments)}function ft(){return(ft=C(M().mark((function t(){var e,r,n;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=y()){t.next=4;break}throw new Error("Anda belum login. Silakan login terlebih dahulu.");case 4:return t.next=6,fetch("".concat(v).concat("/notifications"),{headers:{Authorization:"Bearer ".concat(e)}});case 6:return r=t.sent,t.next=9,r.json();case 9:if(n=t.sent,r.ok){t.next=12;break}throw new Error(n.message||"Terjadi kesalahan saat mengambil notifikasi");case 12:return t.abrupt("return",n);case 15:return t.prev=15,t.t0=t.catch(0),console.error("Error fetching notifications:",t.t0),t.abrupt("return",{error:!0,message:t.t0.message||"Gagal mengambil notifikasi"});case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))).apply(this,arguments)}function ht(t){return dt.apply(this,arguments)}function dt(){return(dt=C(M().mark((function t(e){var r,n,o,i,a,u;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=y()){t.next=4;break}throw new Error("Anda belum login. Silakan login terlebih dahulu.");case 4:return n="".concat(v).concat("/notifications","/").concat(e,"/read"),t.next=7,fetch(n,{method:"PUT",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 7:if(o=t.sent,i=o.headers.get("content-type"),console.log("Content-Type:",i),!i||!i.includes("application/json")){t.next=16;break}return t.next=13,o.json();case 13:a=t.sent,t.next=21;break;case 16:return t.next=18,o.text();case 18:throw u=t.sent,console.log("Non-JSON response text:",u),new Error("Server returned non-JSON response: ".concat(u));case 21:if(o.ok){t.next=31;break}if(403!==o.status){t.next=26;break}throw new Error("Anda tidak memiliki akses untuk menandai notifikasi ini");case 26:if(404!==o.status){t.next=30;break}throw new Error("Notifikasi tidak ditemukan");case 30:throw new Error(a.message||"Terjadi kesalahan saat menandai notifikasi");case 31:return t.abrupt("return",a);case 34:return t.prev=34,t.t0=t.catch(0),console.error("Error message:",t.t0.message),t.abrupt("return",{error:!0,message:t.t0.message||"Gagal menandai notifikasi sebagai dibaca"});case 38:case"end":return t.stop()}}),t,null,[[0,34]])})))).apply(this,arguments)}function pt(){return vt.apply(this,arguments)}function vt(){return(vt=C(M().mark((function t(){var e,r,n,o,i;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=y()){t.next=4;break}throw new Error("Anda belum login. Silakan login terlebih dahulu.");case 4:return console.log("Attempting to mark all notifications as read"),console.log("URL:","".concat(v).concat(z)),t.next=8,fetch("".concat(v).concat(z),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});case 8:if(r=t.sent,console.log("Response received:"),console.log("Status:",r.status),console.log("Status Text:",r.statusText),console.log("OK:",r.ok),n=r.headers.get("content-type"),console.log("Content-Type:",n),!n||!n.includes("application/json")){t.next=21;break}return t.next=18,r.json();case 18:o=t.sent,t.next=26;break;case 21:return t.next=23,r.text();case 23:throw i=t.sent,console.log("Non-JSON response text:",i),new Error("Server returned non-JSON response: ".concat(i));case 26:if(r.ok){t.next=28;break}throw new Error(o.message||"Terjadi kesalahan saat menandai semua notifikasi");case 28:return t.abrupt("return",o);case 31:if(t.prev=31,t.t0=t.catch(0),console.error("Error marking all notifications as read:",t.t0),console.error("Error type:",t.t0.constructor.name),console.error("Error message:",t.t0.message),!(t.t0 instanceof TypeError&&t.t0.message.includes("Failed to fetch"))){t.next=38;break}return t.abrupt("return",{error:!0,message:"Tidak dapat terhubung ke server. Periksa koneksi internet Anda dan pastikan server berjalan."});case 38:return t.abrupt("return",{error:!0,message:t.t0.message||"Gagal menandai semua notifikasi sebagai dibaca"});case 39:case"end":return t.stop()}}),t,null,[[0,31]])})))).apply(this,arguments)}function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function mt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return gt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function wt(){wt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==yt(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(yt(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function bt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(r),!0).forEach((function(e){kt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function kt(t,e,r){return(e=Ot(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Et(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function jt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Et(i,n,o,a,u,"next",t)}function u(t){Et(i,n,o,a,u,"throw",t)}a(void 0)}))}}function St(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ot(n.key),n)}}function Ot(t){var e=function(t){if("object"!=yt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yt(e)?e:e+""}var Pt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=e,this._stories=[]},e=[{key:"loadStories",value:(s=jt(wt().mark((function t(){var e;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q();case 3:(e=t.sent).error?console.error("Error loading stories:",e.message):(this._stories=(e.data||[]).map((function(t){var e,r;return xt(xt({},t),{},{likeCount:(null===(e=t.likes)||void 0===e?void 0:e.length)||0,commentCount:(null===(r=t.comments)||void 0===r?void 0:r.length)||0})})),this._view.showStories(this._stories)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Failed to load stories:",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return s.apply(this,arguments)})},{key:"postNewStory",value:(u=jt(wt().mark((function t(e,r){var n,o;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e&&"string"==typeof e&&""!==e.trim()){t.next=3;break}throw new Error("Content is required");case 3:return t.next=5,Z(e,r);case 5:if((n=t.sent).error){t.next=14;break}return o={id:n.data._id||n.data.id,name:r?"Pengguna":n.data.name,username:r?null:n.data.username,content:n.data.content,isAnonymous:n.data.isAnonymous,likes:n.data.likes||[],comments:n.data.comments||[],views:n.data.views||0},this._stories.unshift(o),this._view.showStories(this._stories),this._view.clearForm(),t.abrupt("return",!0);case 14:throw new Error(n.message||"Failed to post story");case 15:t.next=22;break;case 17:return t.prev=17,t.t0=t.catch(0),console.error("Failed to post story:",t.t0),t.t0.message.includes("Content is required")?alert("Content tidak boleh kosong"):t.t0.message.includes("Failed to post story")?alert("Gagal mengunggah cerita: "+t.t0.message):alert("Terjadi kesalahan server. Silakan coba lagi."),t.abrupt("return",!1);case 22:case"end":return t.stop()}}),t,this,[[0,17]])}))),function(t,e){return u.apply(this,arguments)})},{key:"getCurrentUser",value:function(){try{return JSON.parse(localStorage.getItem("user"))||{}}catch(t){return console.error("Error getting user data:",t),null}}},{key:"getCompleteUserData",value:(a=jt(wt().mark((function t(e){var r,n,o,i;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}return t.abrupt("return",null);case 3:return t.next=5,et(e);case 5:if(!(i=t.sent).error){t.next=9;break}return console.error("Error getting user profile:",i.message),t.abrupt("return",null);case 9:return t.abrupt("return",{name:(null===(r=i.data)||void 0===r?void 0:r.name)||"Pengguna",username:(null===(n=i.data)||void 0===n?void 0:n.username)||null,profilePicture:(null===(o=i.data)||void 0===o?void 0:o.profilePicture)||"./images/image.png"});case 12:return t.prev=12,t.t0=t.catch(0),console.error("Error getting user data:",t.t0),t.abrupt("return",null);case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))),function(t){return a.apply(this,arguments)})},{key:"loadStoryDetail",value:(i=jt(wt().mark((function t(e){var r,n,o,i,a,u,s,c,l,f;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e&&"undefined"!==e){t.next=11;break}if(r=window.location.hash,!(n=r.match(/#\/story\/([a-f0-9]+)/i))||!n[1]){t.next=8;break}e=n[1],t.next=11;break;case 8:return console.error("Invalid story ID provided to loadStoryDetail:",e),this._view.showError("ID cerita tidak valid. Silakan coba lagi."),t.abrupt("return");case 11:return t.next=13,nt(e);case 13:if("string"!=typeof(o=t.sent)||!o.startsWith("<!DOCTYPE")){t.next=16;break}throw new Error("Server returned HTML instead of JSON");case 16:if(o&&!o.error){t.next=21;break}return i=(null==o?void 0:o.message)||"Failed to load story details",console.error("Error loading story detail:",i),this._view.showError("Gagal memuat detail story. Silakan coba lagi."),t.abrupt("return");case 21:if((a=o.data).isAnonymous||!a.username){t.next=29;break}return t.next=25,this.getCompleteUserData(a.username);case 25:u=t.sent,a.profilePicture=(null==u?void 0:u.profilePicture)||"./images/image.png",t.next=30;break;case 29:a.profilePicture="./images/image.png";case 30:if(!(a.comments&&a.comments.length>0)){t.next=54;break}s=mt(a.comments),t.prev=32,s.s();case 34:if((c=s.n()).done){t.next=46;break}if(!(l=c.value).username){t.next=43;break}return t.next=39,this.getCompleteUserData(l.username);case 39:f=t.sent,l.profilePicture=(null==f?void 0:f.profilePicture)||"./images/image.png",t.next=44;break;case 43:l.profilePicture="./images/image.png";case 44:t.next=34;break;case 46:t.next=51;break;case 48:t.prev=48,t.t0=t.catch(32),s.e(t.t0);case 51:return t.prev=51,s.f(),t.finish(51);case 54:this._view.showStoryDetail(a),t.next=61;break;case 57:t.prev=57,t.t1=t.catch(0),console.error("Failed to load story detail:",t.t1),this._view.showError("Terjadi kesalahan saat memuat detail story.");case 61:case"end":return t.stop()}}),t,this,[[0,57],[32,48,51,54]])}))),function(t){return i.apply(this,arguments)})},{key:"getStoryById",value:(o=jt(wt().mark((function t(e){var r;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,nt(e);case 3:if((r=t.sent).error){t.next=6;break}return t.abrupt("return",r.data);case 6:throw new Error(r.message||"Failed to get story");case 9:throw t.prev=9,t.t0=t.catch(0),console.error("Error getting story:",t.t0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))),function(t){return o.apply(this,arguments)})},{key:"likeStory",value:(n=jt(wt().mark((function t(e){var r,n;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw new Error("Invalid story ID");case 3:return t.next=5,ot(e);case 5:return r=t.sent,-1!==(n=this._stories.findIndex((function(t){return t.id===e||t._id===e})))&&(this._stories[n].likeCount=r),t.abrupt("return",r);case 11:return t.prev=11,t.t0=t.catch(0),console.error("Failed to like story:",t.t0),t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(t){return n.apply(this,arguments)})},{key:"addComment",value:(r=jt(wt().mark((function t(e,r){var n,o,i;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r&&"string"==typeof r&&""!==r.trim()){t.next=3;break}throw new Error("Content is required");case 3:if(e&&"undefined"!==e){t.next=11;break}if(n=window.location.hash,!(o=n.match(/#\/story\/([a-f0-9]+)/i))||!o[1]){t.next=10;break}e=o[1],t.next=11;break;case 10:throw new Error("Invalid story ID");case 11:return t.next=13,at(e,r);case 13:if((i=t.sent).error){t.next=20;break}return t.next=17,this.loadStoryDetail(e);case 17:return t.abrupt("return",!0);case 20:throw new Error(i.message||"Failed to post comment");case 21:t.next=27;break;case 23:throw t.prev=23,t.t0=t.catch(0),console.error("Failed to post comment:",t.t0),t.t0;case 27:case"end":return t.stop()}}),t,this,[[0,23]])}))),function(t,e){return r.apply(this,arguments)})}],e&&St(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i,a,u,s}();function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Tt(){Tt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==_t(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(_t(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function It(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}var Nt=function(t){var e=document.getElementById("stories-container");e&&e.addEventListener("click",(function(e){var r=e.target.closest(".story-container");if(r){var n=r.dataset.storyId;if(n)if(e.target.closest(".like-btn, .comment-btn, .view-btn, .user-info")){var o=e.target.closest(".like-btn");if(o)return e.stopPropagation(),void Lt(t,n,o);if(e.target.closest(".comment-btn"))return e.stopPropagation(),void(window.location.hash="#/story/".concat(n));e.target.closest(".view-btn")&&e.stopPropagation()}else window.location.hash="#/story/".concat(n)}}))},Lt=function(){var t,e=(t=Tt().mark((function t(e,r,n){var o,i;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.likeStory(r);case 3:"number"==typeof(o=t.sent)&&(i=n.querySelector(".like-count"))&&(i.textContent=o),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error handling like:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){It(i,n,o,a,u,"next",t)}function u(t){It(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}();function Gt(t){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gt(t)}function Bt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function At(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(r),!0).forEach((function(e){Mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mt(t,e,r){return(e=Ut(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ft(){Ft=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Gt(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Gt(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function Ct(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Dt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ct(i,n,o,a,u,"next",t)}function u(t){Ct(i,n,o,a,u,"throw",t)}a(void 0)}))}}function zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ut(n.key),n)}}function Ut(t){var e=function(t){if("object"!=Gt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Gt(e)?e:e+""}var qt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._presenter=new Pt(this),this._currentUser=null},e=[{key:"render",value:(i=Dt(Ft().mark((function t(){var e,r,n,o,i,a;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this._currentUser=JSON.parse(localStorage.getItem("user"))||{},o=(null===(e=this._currentUser)||void 0===e?void 0:e.name)||"Nama Pengguna",i=null!==(r=this._currentUser)&&void 0!==r&&r.username?"@".concat(this._currentUser.username):"@namapengguna",a=(null===(n=this._currentUser)||void 0===n?void 0:n.profilePicture)||"./images/image.png",t.abrupt("return",'\n        <div class="ml-16 min-h-screen p-10">\n        <div class="mb-1">\n          <h1 class="text-2xl font-semibold text-gray-900 mb-2">Story MindBlown</h1>\n          <p class="text-gray-600">Berbagi cerita, temukan makna.</p>\n          <hr class="mt-4 text-gray-300">\n        </div>\n\n        <div class="grid grid-cols-2 gap-4 h-screen">\n        <div class="overflow-y-auto p-6 mr-10 border-gray-200">\n          <div id="stories-container" class="space-y-6">\n          </div>\n        </div>\n\n        <div class="p-6">\n          <div class="space-y-6 mt-4">\n            '.concat(f({username:o,handle:i,profilePicture:a}),"\n          </div>\n        </div>\n      </div>\n      </div>\n      "));case 8:return t.prev=8,t.t0=t.catch(0),console.error("Error rendering StoryPage:",t.t0),t.abrupt("return","<div>Error loading page content</div>");case 12:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(){return i.apply(this,arguments)})},{key:"afterRender",value:(o=Dt(Ft().mark((function t(){return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._presenter.loadStories();case 3:this._setupEventListeners(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error("Error in afterRender:",t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])}))),function(){return o.apply(this,arguments)})},{key:"_setupEventListeners",value:function(){this._setupFormSubmit(),Nt(this._presenter)}},{key:"_setupFormSubmit",value:function(){var t=this,e=document.getElementById("chat-form");e&&e.addEventListener("submit",function(){var r=Dt(Ft().mark((function r(n){var o,i,a;return Ft().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),o=document.getElementById("chat-input"),i=document.getElementById("post-anonymously").checked,(a=e.querySelector('button[type="submit"]')).disabled=!0,a.textContent="Mengunggah...",r.prev=6,null==o||!o.value.trim()){r.next=14;break}return r.next=10,t._presenter.postNewStory(o.value.trim(),i);case 10:r.sent&&t._showToast("Cerita berhasil diunggah!"),r.next=15;break;case 14:alert("Silakan masukkan konten cerita");case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(6),console.error("Error submitting story:",r.t0);case 20:return r.prev=20,a.disabled=!1,a.textContent="Unggah",r.finish(20);case 24:case"end":return r.stop()}}),r,null,[[6,17,20,24]])})));return function(t){return r.apply(this,arguments)}}())}},{key:"_getProfilePicture",value:(n=Dt(Ft().mark((function t(e){var r;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return","./images/image.png");case 2:return t.prev=2,t.next=5,getUserProfile(e);case 5:return r=t.sent,t.abrupt("return",r.profilePicture||"./images/image.png");case 9:return t.prev=9,t.t0=t.catch(2),console.error("Error getting profile picture:",t.t0),t.abrupt("return","./images/image.png");case 13:case"end":return t.stop()}}),t,null,[[2,9]])}))),function(t){return n.apply(this,arguments)})},{key:"showStories",value:(r=Dt(Ft().mark((function t(e){var r,n,o=this;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.getElementById("stories-container")){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,Promise.all(e.map(function(){var t=Dt(Ft().mark((function t(e,r){var n,i,a,u;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.id||e._id||e.storyId||"story-".concat(r),a="./images/image.png",e.isAnonymous||!e.username){t.next=13;break}return t.prev=3,t.next=6,o._presenter.getCompleteUserData(e.username);case 6:u=t.sent,a=(null==u?void 0:u.profilePicture)||"./images/image.png",t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("Error getting user profile:",t.t0);case 13:return t.abrupt("return",At(At({},e),{},{storyId:i,profilePicture:a,likeCount:e.likeCount||(null===(n=e.likes)||void 0===n?void 0:n.length)||0}));case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,r){return t.apply(this,arguments)}}()));case 6:n=t.sent,r.innerHTML=n.map((function(t){var e;return l({username:t.isAnonymous?"Pengguna":t.name,handle:t.isAnonymous?"Anonim":"@".concat(t.username),content:t.content,isAnonymous:t.isAnonymous,storyId:t.storyId,likeCount:t.likeCount,commentCount:(null===(e=t.comments)||void 0===e?void 0:e.length)||0,viewCount:t.viewCount||0,profilePicture:t.profilePicture})})).join(""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("Error showing stories:",t.t0),r.innerHTML="<div>Error loading stories</div>";case 14:case"end":return t.stop()}}),t,null,[[3,10]])}))),function(t){return r.apply(this,arguments)})},{key:"clearForm",value:function(){try{var t=document.getElementById("chat-input");t&&(t.value="");var e=document.getElementById("post-anonymously");e&&(e.checked=!1)}catch(t){console.error("Error clearing form:",t)}}}],e&&zt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o,i}();function Ht(t,e){var r=t.getFullYear(),n=t.getMonth();document.getElementById("monthDisplay").textContent="".concat(e[n]," ").concat(r);for(var o=new Date(r,n,1),i=new Date(r,n+1,0),a=o.getDay(),u=i.getDate(),s=new Date(r,n,0).getDate(),c=document.getElementById("calendarDays"),l="",f=a;f>0;f--)l+='\n            <div class="flex items-center justify-center border-t border-r border-gray-100 p-2 h-20 md:h-25 lg:h-30">\n                <span class="text-sm text-gray-400">'.concat(s-f+1,"</span>\n            </div>");for(var h=1;h<=u;h++){var d=h===(new Date).getDate()&&n===(new Date).getMonth()&&r===(new Date).getFullYear(),p=d?"bg-blue-50 text-blue-600 font-semibold":"hover:bg-gray-50",v=(n+1).toString().padStart(2,"0"),y=h.toString().padStart(2,"0");l+='\n            <div class="flex items-center justify-center border-t border-r border-gray-100 p-2 h-20 md:h-25 lg:h-30 '.concat(p,'" data-date="').concat(r,"-").concat(v,"-").concat(y,'">\n                <span class="text-sm ').concat(d?"text-blue-600":"text-gray-700",'">').concat(h,"</span>\n            </div>")}for(var m=35-(a+u),g=1;g<=m;g++)l+='\n            <div class="flex items-center justify-center border-t border-r border-gray-100 p-2 h-20 md:h-25 lg:h-30">\n                <span class="text-sm text-gray-400">'.concat(g,"</span>\n            </div>");c.innerHTML=l}function Rt(t){return Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(t)}function Jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Wt(){Wt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Rt(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Rt(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function Yt(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Kt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Yt(i,n,o,a,u,"next",t)}function u(t){Yt(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$t(n.key),n)}}function $t(t){var e=function(t){if("object"!=Rt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Rt(e)?e:e+""}var Qt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentDate=new Date,this.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"]},e=[{key:"checkTodayEntry",value:(o=Kt(Wt().mark((function t(){var e;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Presenter: Checking today entry"),t.next=4,J();case 4:return e=t.sent,t.abrupt("return",{exists:e.exists,formattedDate:this.formatDate(this.currentDate)});case 8:throw t.prev=8,t.t0=t.catch(0),console.error("Presenter: Error checking today entry:",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(){return o.apply(this,arguments)})},{key:"getEntryByDate",value:(n=Kt(Wt().mark((function t(e){var r;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Presenter: Getting entry for date:",e),t.next=4,Y(e);case 4:return r=t.sent,t.abrupt("return",{data:r.data,formattedDate:this.formatDate(new Date(e))});case 8:throw t.prev=8,t.t0=t.catch(0),console.error("Presenter: Error getting entry by date:",t.t0),t.t0;case 12:case"end":return t.stop()}}),t,this,[[0,8]])}))),function(t){return n.apply(this,arguments)})},{key:"saveEntry",value:(r=Kt(Wt().mark((function t(e){var r;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Presenter: Saving entry data:",e),t.next=4,V(e);case 4:return r=t.sent,console.log("Presenter: Save entry result:",r),t.abrupt("return",r);case 9:throw t.prev=9,t.t0=t.catch(0),console.error("Presenter: Error saving entry:",t.t0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))),function(t){return r.apply(this,arguments)})},{key:"getCurrentDate",value:function(){return this.currentDate}},{key:"setCurrentDate",value:function(t){this.currentDate=t}},{key:"getMonthNames",value:function(){return this.monthNames}},{key:"formatDate",value:function(t){return t.toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}},{key:"parseDateString",value:function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Jt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.match(/(\d+)\s+(\w+)\s+(\d+)/),4),r=(e[0],e[1]),n=e[2],o=e[3];return new Date(o,{Januari:0,Februari:1,Maret:2,April:3,Mei:4,Juni:5,Juli:6,Agustus:7,September:8,Oktober:9,November:10,Desember:11}[n],r)}}],e&&Vt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Zt(){Zt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Xt(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Xt(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function te(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ee(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){te(i,n,o,a,u,"next",t)}function u(t){te(i,n,o,a,u,"throw",t)}a(void 0)}))}}function re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ne(n.key),n)}}function ne(t){var e=function(t){if("object"!=Xt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xt(e)?e:e+""}var oe=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.presenter=new Qt},e=[{key:"render",value:(o=ee(Zt().mark((function t(){var e;return Zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[{date:"Kamis, 1 Mei",emoji:"🙂"},{date:"Jumat, 2 Mei",emoji:"😊"},{date:"Sabtu, 3 Mei",emoji:"😄"},{date:"Minggu, 4 Mei",emoji:"🤗"},{date:"Senin, 5 Mei",emoji:"🤔"}],t.abrupt("return",'\n        <div class="p-4 lg:p-8 pb-20 lg:pb-10 md:pb-10">\n        <div class="max-w-md md:max-w-[90%] ml-0 md:ml-16 lg:ml-24 mx-auto">\n            <div class="mb-4">\n                <h1 class="text-2xl font-semibold text-gray-900 mb-2">Mind Tracker</h1>\n                <p class="text-gray-600 text-sm lg:text-md">Hari ini rasanya gimana? Ini tracker ini buat bantu kamu lebih sadar sama perasaan dan progressmu.</p>\n                <hr class="mt-4 text-gray-300">\n            </div>\n\n            <div class="mb-6">\n                <button id="trackTodayBtn" class="bg-third hover:bg-teal-700 text-white px-3 lg:px-4 py-2 rounded-md flex items-center">\n                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>\n                    </svg>\n                    Yuk Track Your Mind !\n                </button>\n            </div>\n\n            <div>\n             <h2 class="font-semibold text-base mb-1 lg:mb-3">Mood dalam 1 Minggu</h2> \n             '.concat(s(e),'\n            </div>\n\n            <div class="flex items-center justify-between py-2">\n                <h2 id="monthDisplay" class="text-xl font-semibold text-gray-800">\n                    May 2025\n                </h2>\n\n                <div class="flex items-center space-x-2">\n                    <button id="todayBtn"\n                    class="bg-gray-200 text-gray-400 text-sm px-4 py-2 rounded-md">\n                    Today\n                    </button>\n\n                    <div class="flex rounded-md overflow-hidden border border-gray-200">\n                    <button id="prevMonth" class="px-3 py-2 bg-gray-100 hover:bg-gray-200">\n                        <svg class="w-4 h-4 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />\n                        </svg>\n                    </button>\n                    <button id="nextMonth" class="px-3 py-2 bg-gray-100 hover:bg-gray-200 border-l border-gray-300">\n                        <svg class="w-4 h-4 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />\n                        </svg>\n                    </button>\n                    </div>\n                </div>\n                </div>\n\n\n            <div class="bg-white shadow-sm">\n                <div class="grid grid-cols-7 gap-0 border-t border-r border-gray-100">\n                    <div class="text-xs text-gray-500 text-center py-2 border-t border-r border-gray-100">Su</div>\n                    <div class="text-xs text-gray-500 text-center py-2 border-t border-r border-gray-100">Mo</div>\n                    <div class="text-xs text-gray-500 text-center py-2 border-t border-r border-gray-100">Tu</div>\n                    <div class="text-xs text-gray-500 text-center py-2 border-t border-r border-gray-100">We</div>\n                    <div class="text-xs text-gray-500 text-center py-2 border-t border-r border-gray-100">Th</div>\n                    <div class="text-xs text-gray-500 text-center py-2 border-t border-r border-gray-100">Fr</div>\n                    <div class="text-xs text-gray-500 text-center py-2 border-t border-r border-gray-100">Sa</div>\n\n                    <div id="calendarDays" class="col-span-7 grid grid-cols-7"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n      '));case 2:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=ee(Zt().mark((function t(){var e=this;return Zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ht(this.presenter.getCurrentDate(),this.presenter.getMonthNames()),document.getElementById("prevMonth").addEventListener("click",(function(){var t=e.presenter.getCurrentDate();t.setMonth(t.getMonth()-1),e.presenter.setCurrentDate(t),Ht(t,e.presenter.getMonthNames())})),document.getElementById("nextMonth").addEventListener("click",(function(){var t=e.presenter.getCurrentDate();t.setMonth(t.getMonth()+1),e.presenter.setCurrentDate(t),Ht(t,e.presenter.getMonthNames())})),document.getElementById("todayBtn").addEventListener("click",(function(){e.presenter.setCurrentDate(new Date),Ht(e.presenter.getCurrentDate(),e.presenter.getMonthNames())})),document.getElementById("trackTodayBtn").addEventListener("click",ee(Zt().mark((function t(){var r;return Zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.presenter.checkTodayEntry();case 3:if(!(r=t.sent).exists){t.next=7;break}return alert("Anda sudah mengisi Mind Tracker untuk hari ini."),t.abrupt("return");case 7:e.showModal(r.formattedDate,null,!1),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("Error checking mind tracker entry:",t.t0),alert(t.t0.message||"Terjadi kesalahan server");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))),document.getElementById("calendarDays").addEventListener("click",function(){var t=ee(Zt().mark((function t(r){var n;return Zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=r.target.closest("div[data-date]"))&&e.handleDayClick(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"handleDayClick",value:(r=ee(Zt().mark((function t(e){var r,n;return Zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelectorAll("div[data-date]").forEach((function(t){t.classList.remove("bg-blue-100")})),e.classList.add("bg-blue-100"),r=e.getAttribute("data-date"),t.prev=3,t.next=6,this.presenter.getEntryByDate(r);case 6:n=t.sent,this.showModal(n.formattedDate,n.data,!0),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),console.error("Error fetching mind tracker data:",t.t0),alert(t.t0.message||"Terjadi kesalahan server");case 14:case"end":return t.stop()}}),t,this,[[3,10]])}))),function(t){return r.apply(this,arguments)})},{key:"showModal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=document.getElementById("mindTrackerModal");n&&n.remove();var o=!!document.getElementById("calendarDays").contains(document.activeElement)||r;document.body.insertAdjacentHTML("beforeend",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return'\n    <div id="mindTrackerModal" class="fixed inset-0 items-center justify-center bg-black/40 z-50 hidden">\n        <div class="bg-white rounded-lg shadow-lg p-6 md:w-lg lg:w-full lg:max-w-lg">\n            <div class="flex justify-between items-center mb-4">\n                <h3 id="modalTitle" class="text-lg font-semibold">Mind Tracker</h3>\n                <button id="closeModalBtn" class="text-gray-400 hover:text-gray-600 text-3xl">&times;</button>\n            </div>\n            <hr class="my-4 text-gray-300">\n            <form id="mindTrackerForm">\n                <div class="text-center mb-4">\n                    <p class="text-sm my-4">Perasaanmu Hari ini</p>\n                    <div class="flex justify-center space-x-6 mb-2 gap-15">\n                        <label class="flex flex-col gap-3 cursor-pointer">\n                            <input type="radio" name="mood" value="buruk" class="hidden peer" required>\n                            <span class="text-3xl peer-checked:scale-125 transition">😞</span>\n                            <div class="text-xs">Buruk</div>\n                        </label>\n                        <label class="flex flex-col gap-3 cursor-pointer">\n                            <input type="radio" name="mood" value="oke" class="hidden peer" required>\n                            <span class="text-3xl peer-checked:scale-125 transition">🙂</span>\n                            <div class="text-xs">Oke</div>\n                        </label>\n                        <label class="flex flex-col gap-3 cursor-pointer">\n                            <input type="radio" name="mood" value="sempurna" class="hidden peer" required>\n                            <span class="text-3xl peer-checked:scale-125 transition">🥳</span>\n                            <div class="text-xs">Sempurna</div>\n                        </label>\n                    </div>\n                    <p class="mb-4 mt-8">Progres kamu</p>\n                    <textarea name="progress" class="w-full border p-2 rounded-xl overflow-hidden" rows="3" placeholder="Ceritakan bagaimana harimu dan perasaanmu sekarang" required '.concat(t?"readonly":"","></textarea>\n                </div>\n                ").concat(t?"":'\n                <div id="submit-mind-tracker" class="flex justify-end">\n                    <button type="submit" class="w-25 bg-third text-white py-2 rounded-lg mt-2 justify-end">Kirim</button>\n                </div>\n                ',"\n            </form>\n        </div>\n    </div>\n    ")}(o));var i=document.getElementById("mindTrackerModal"),a=document.getElementById("modalTitle"),u=(document.getElementById("closeModalBtn"),document.getElementById("mindTrackerForm"));if(a.textContent="Mind Tracker — ".concat(t),i.classList.remove("hidden"),i.classList.add("flex"),e&&(document.querySelector('input[name="mood"][value="'.concat(e.mood,'"]')).checked=!0,document.querySelector('textarea[name="progress"]').value=e.progress||""),o){var s=document.getElementById("mindTrackerForm");s&&(s.onsubmit=function(t){return t.preventDefault(),!1})}this.setupModalEventListeners(i,u,t)}},{key:"setupModalEventListeners",value:function(t,e,r){var n=this;document.getElementById("closeModalBtn").addEventListener("click",(function(){t.classList.add("hidden"),t.classList.remove("flex")})),t.addEventListener("click",(function(e){e.target===t&&(t.classList.add("hidden"),t.classList.remove("flex"))})),e&&e.addEventListener("submit",function(){var o=ee(Zt().mark((function o(i){var a,u,s;return Zt().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i.preventDefault(),i.stopPropagation(),a=new FormData(e),u={date:n.presenter.parseDateString(r).toISOString(),mood:a.get("mood"),progress:a.get("progress")},o.prev=4,o.next=7,n.presenter.saveEntry(u);case 7:if((s=o.sent).error){o.next=16;break}t.classList.add("hidden"),t.classList.remove("flex"),e.reset(),Ht(n.presenter.getCurrentDate(),n.presenter.getMonthNames()),alert(s.message),o.next=17;break;case 16:throw new Error(s.message);case 17:o.next=23;break;case 19:o.prev=19,o.t0=o.catch(4),console.error("Error saving mind tracker:",o.t0),alert(o.t0.message||"Terjadi kesalahan server");case 23:return o.abrupt("return",!1);case 24:case"end":return o.stop()}}),o,null,[[4,19]])})));return function(t){return o.apply(this,arguments)}}())}}],e&&re(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(){ae=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==ie(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(ie(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function ue(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function se(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ue(i,n,o,a,u,"next",t)}function u(t){ue(i,n,o,a,u,"throw",t)}a(void 0)}))}}function ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,le(n.key),n)}}function le(t){var e=function(t){if("object"!=ie(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ie(e)?e:e+""}var fe=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=e},e=[{key:"loadNotifications",value:(o=se(ae().mark((function t(){var e,r;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,lt();case 3:if(!(e=t.sent).error){t.next=7;break}return this.view.showError(e.message),t.abrupt("return");case 7:r=this.formatNotifications(e.data),this.view.displayNotifications(r),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.error("Error loading notifications:",t.t0),this.view.showError("Gagal memuat notifikasi");case 15:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(){return o.apply(this,arguments)})},{key:"formatNotifications",value:function(t){var e=this;return t.map((function(t){return{id:t._id,icon:e.getNotificationIcon(t.type),title:e.getNotificationTitle(t.type),message:t.message,type:t.type,read:t.read,createdAt:t.createdAt,storyId:t.storyId,commentId:t.commentId,fromUsername:t.fromUsername}}))}},{key:"getNotificationTitle",value:function(t){return{comment:"Komentar Baru",reply:"Balasan Komentar",like:"Suka",story:"Story Baru",follow:"Pengikut Baru",reminder:"Pengingat",system:"Sistem"}[t]||"Notifikasi"}},{key:"getNotificationIcon",value:function(t){return{comment:"images/logo.png",reply:"images/logo.png",like:"images/logo.png",story:"images/logo.png",follow:"images/logo.png",reminder:"images/logo.png",system:"images/logo.png"}[t]||"images/logo.png"}},{key:"markAsRead",value:(n=se(ae().mark((function t(e){var r;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ht(e);case 3:if(!(r=t.sent).error){t.next=7;break}return console.error("Error marking notification as read:",r.message),t.abrupt("return",!1);case 7:return this.view.updateNotificationReadStatus(e),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t.catch(0),console.error("Error marking notification as read:",t.t0),t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,this,[[0,11]])}))),function(t){return n.apply(this,arguments)})},{key:"markAllAsRead",value:(r=se(ae().mark((function t(){var e;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Presenter: Marking all notifications as read"),t.next=4,pt();case 4:if(!(e=t.sent).error){t.next=14;break}if(console.error("Error marking all notifications as read:",e.message),!e.message.includes("terhubung ke server")){t.next=12;break}return console.warn("Network error - updating all notifications UI optimistically"),this.view.updateAllNotificationsReadStatus(),this.view.showSuccessMessage("Semua notifikasi ditandai sebagai dibaca (offline)"),t.abrupt("return",!0);case 12:return this.view.showError(e.message),t.abrupt("return",!1);case 14:return console.log("Successfully marked all notifications as read"),this.view.updateAllNotificationsReadStatus(),this.view.showSuccessMessage("Semua notifikasi ditandai sebagai dibaca"),t.abrupt("return",!0);case 20:return t.prev=20,t.t0=t.catch(0),console.error("Error marking all notifications as read:",t.t0),this.view.showError("Gagal menandai semua notifikasi sebagai dibaca"),t.abrupt("return",!1);case 25:case"end":return t.stop()}}),t,this,[[0,20]])}))),function(){return r.apply(this,arguments)})}],e&&ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function de(){de=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==he(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(he(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function pe(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ve(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){pe(i,n,o,a,u,"next",t)}function u(t){pe(i,n,o,a,u,"throw",t)}a(void 0)}))}}function ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,me(n.key),n)}}function me(t){var e=function(t){if("object"!=he(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=he(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==he(e)?e:e+""}var ge=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.presenter=new fe(this),this.notifications=[]},e=[{key:"render",value:(n=ve(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="lg:p-8 p-6 pt-2 md:p-6">\n        <div class="max-w-xl w-full ml-0 md:ml-16 lg:ml-24 text-left">\n          <div class="flex justify-between items-center mb-8 mt-3">\n            <h1 class="text-2xl font-semibold">Pemberitahuan</h1>\n            <button id="mark-all-read-btn" class="text-sm text-third hover:text-third/80 hidden">\n              Tandai Semua Dibaca\n            </button>\n          </div>\n          \n          <div id="notification-loading" class="text-center py-8">\n            <p class="text-gray-500">Memuat notifikasi...</p>\n          </div>\n          \n          <div id="notification-container" class="hidden">\n            \x3c!-- Notifications will be rendered here --\x3e\n          </div>\n          \n          <div id="notification-error" class="hidden text-center py-8">\n            <p class="text-red-500">Gagal memuat notifikasi</p>\n            <button id="retry-btn" class="mt-4 px-4 py-2 bg-third text-white rounded-lg">Coba Lagi</button>\n          </div>\n\n          <div id="success-message" class="hidden bg-third/10 border border-third text-third px-4 py-3 rounded mb-4">\n          <p></p>\n        </div>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(r=ve(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.presenter.loadNotifications();case 2:this.attachEventListeners();case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"displayNotifications",value:function(t){this.notifications=t;var e=document.getElementById("notification-container"),r=document.getElementById("notification-loading"),n=document.getElementById("notification-error"),o=document.getElementById("mark-all-read-btn");r.classList.add("hidden"),n.classList.add("hidden"),0===t.length?(e.innerHTML='\n        <div class="text-center py-8">\n          <p class="text-gray-500">Belum ada notifikasi</p>\n        </div>\n      ',o.classList.add("hidden")):(e.innerHTML=function(t){return'\n        <div class="">\n            <div>\n                '.concat(t.map(c).join(""),"\n            </div>\n        </div>\n    ")}(t),this.attachNotificationClickListeners(),t.some((function(t){return!t.read}))?o.classList.remove("hidden"):o.classList.add("hidden")),e.classList.remove("hidden")}},{key:"showError",value:function(t){var e=document.getElementById("notification-container"),r=document.getElementById("notification-loading"),n=document.getElementById("notification-error"),o=n.querySelector("p");r.classList.add("hidden"),e.classList.add("hidden"),o.textContent=t,n.classList.remove("hidden")}},{key:"showSuccessMessage",value:function(t){var e=document.getElementById("success-message");e.querySelector("p").textContent=t,e.classList.remove("hidden"),setTimeout((function(){e.classList.add("hidden")}),3e3)}},{key:"attachEventListeners",value:function(){var t=this,e=document.getElementById("retry-btn");e&&e.addEventListener("click",(function(){t.showLoading(),t.presenter.loadNotifications()}));var r=document.getElementById("mark-all-read-btn");r&&r.addEventListener("click",(function(){t.handleMarkAllAsRead()})),this.attachNotificationClickListeners()}},{key:"attachNotificationClickListeners",value:function(){var t=this;document.querySelectorAll("[data-notification-id]").forEach((function(e){e.removeEventListener("click",t.handleNotificationClickBound),t.handleNotificationClickBound=function(e){var r=e.currentTarget.dataset.notificationId;t.handleNotificationClick(r)},e.addEventListener("click",t.handleNotificationClickBound)}))}},{key:"handleMarkAllAsRead",value:function(){var t=document.getElementById("mark-all-read-btn");t.disabled=!0,t.textContent="Memproses...",this.presenter.markAllAsRead().then((function(){t.disabled=!1,t.textContent="Tandai Semua Dibaca"}))}},{key:"showLoading",value:function(){var t=document.getElementById("notification-container"),e=document.getElementById("notification-loading"),r=document.getElementById("notification-error"),n=document.getElementById("mark-all-read-btn");t.classList.add("hidden"),r.classList.add("hidden"),n.classList.add("hidden"),e.classList.remove("hidden")}},{key:"handleNotificationClick",value:function(t){var e=this.notifications.find((function(e){return e.id===t}));if(e){var r=!e.read;r&&this.updateNotificationReadStatus(t),"comment"===e.type&&e.storyId||"reply"===e.type&&e.storyId?window.location.hash="#/story/".concat(e.storyId):"reminder"===e.type&&(window.location.hash="#/calendar"),r&&this.presenter.markAsRead(t).catch((function(t){console.warn("Failed to mark notification as read on server, but UI updated locally:",t)}))}}},{key:"updateNotificationReadStatus",value:function(t){var e=this.notifications.find((function(e){return e.id===t}));e&&(e.read=!0);var r=document.querySelector('[data-notification-id="'.concat(t,'"]'));if(r){r.classList.add("opacity-60");var n=r.querySelector(".bg-third");n&&n.remove()}this.updateMarkAllButtonVisibility()}},{key:"updateAllNotificationsReadStatus",value:function(){this.notifications.forEach((function(t){t.read=!0})),document.querySelectorAll("[data-notification-id]").forEach((function(t){t.classList.add("opacity-60");var e=t.querySelector(".bg-third");e&&e.remove()}));var t=document.getElementById("mark-all-read-btn");t&&t.classList.add("hidden")}},{key:"updateMarkAllButtonVisibility",value:function(){var t=document.getElementById("mark-all-read-btn");t&&(this.notifications.some((function(t){return!t.read}))?t.classList.remove("hidden"):t.classList.add("hidden"))}}],e&&ye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function we(t){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},we(t)}function be(){be=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==we(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(we(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function xe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ke(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(r),!0).forEach((function(e){Ee(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ee(t,e,r){return(e=Pe(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function je(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Se(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){je(i,n,o,a,u,"next",t)}function u(t){je(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pe(n.key),n)}}function Pe(t){var e=function(t){if("object"!=we(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==we(e)?e:e+""}function _e(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Te(t,e){return t.get(Ne(t,e))}function Ie(t,e,r){return t.set(Ne(t,e),r),r}function Ne(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Le=new WeakMap,Ge=new WeakMap,Be=new WeakMap,Ae=function(){return t=function t(e){var r=e.view,n=e.authModel;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_e(this,Le,void 0),_e(this,Ge,void 0),_e(this,Be,[]),Ie(Le,this,r),Ie(Ge,this,n)},e=[{key:"loadUserProfile",value:(o=Se(be().mark((function t(){var e,r,n,o;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(e=JSON.parse(localStorage.getItem("user"))||{}).username){t.next=4;break}throw new Error("User data not found");case 4:return t.next=6,et(e.username);case 6:if(!(r=t.sent).error){t.next=9;break}throw new Error(r.message);case 9:return t.next=11,Q();case 11:if(!(n=t.sent).error){t.next=14;break}throw new Error(n.message);case 14:return Ie(Be,this,(n.data||[]).filter((function(t){return!t.isAnonymous&&t.username===e.username}))),o=ke(ke(ke({},e),r.data),{},{profilePicture:r.data.profilePicture||e.profilePicture}),localStorage.setItem("user",JSON.stringify(o)),Te(Le,this).showUserStories(Te(Be,this)),t.abrupt("return",!0);case 21:return t.prev=21,t.t0=t.catch(0),console.error("Failed to load profile:",t.t0),t.abrupt("return",!1);case 25:case"end":return t.stop()}}),t,this,[[0,21]])}))),function(){return o.apply(this,arguments)})},{key:"updateProfile",value:(n=Se(be().mark((function t(e){var r,n,o;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,st(e);case 3:if(!(r=t.sent).error){t.next=6;break}throw new Error(r.message);case 6:return n=JSON.parse(localStorage.getItem("user"))||{},o=ke(ke(ke({},n),r.data),{},{profilePicture:r.data.profilePicture||n.profilePicture}),localStorage.setItem("user",JSON.stringify(o)),document.dispatchEvent(new CustomEvent("profileUpdated")),t.abrupt("return",r);case 13:throw t.prev=13,t.t0=t.catch(0),console.error("Failed to update profile:",t.t0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,13]])}))),function(t){return n.apply(this,arguments)})},{key:"likeStory",value:function(){var t=Se(be().mark((function t(e){var r,n,o,i;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw new Error("Invalid story ID");case 3:return t.next=5,ot(e);case 5:if(!(n=t.sent).error){t.next=8;break}throw new Error(n.message);case 8:return-1!==(o=Te(Be,this).findIndex((function(t){return t.id===e||t._id===e})))&&(Te(Be,this)[o].likes=(null===(i=n.data)||void 0===i?void 0:i.likes)||[]),t.abrupt("return",(null===(r=n.data)||void 0===r||null===(r=r.likes)||void 0===r?void 0:r.length)||0);case 13:throw t.prev=13,t.t0=t.catch(0),console.error("Failed to like story:",t.t0),t.t0;case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},{key:"addComment",value:(r=Se(be().mark((function t(e,r){var n,o,i,a;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e&&r){t.next=3;break}throw new Error("Invalid data for comment");case 3:return t.next=5,at(e,r);case 5:if(!(o=t.sent).error){t.next=8;break}throw new Error(o.message);case 8:return-1!==(i=Te(Be,this).findIndex((function(t){return t.id===e||t._id===e})))&&(Te(Be,this)[i].comments=(null===(a=o.data)||void 0===a?void 0:a.comments)||[]),t.abrupt("return",(null===(n=o.data)||void 0===n||null===(n=n.comments)||void 0===n?void 0:n.length)||0);case 13:throw t.prev=13,t.t0=t.catch(0),console.error("Failed to add comment:",t.t0),t.t0;case 17:case"end":return t.stop()}}),t,this,[[0,13]])}))),function(t,e){return r.apply(this,arguments)})},{key:"handleLogout",value:function(){Te(Ge,this).getLogout(),Te(Le,this).logoutSuccess()}}],e&&Oe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n,o}();function Me(t){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Me(t)}function Fe(){Fe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Me(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Me(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function Ce(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function De(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ce(i,n,o,a,u,"next",t)}function u(t){Ce(i,n,o,a,u,"throw",t)}a(void 0)}))}}function ze(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ue(n.key),n)}}function Ue(t){var e=function(t){if("object"!=Me(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Me(e)?e:e+""}function qe(t,e,r){He(t,e),e.set(t,r)}function He(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Re(t,e){return t.get(We(t,e))}function Je(t,e,r){return t.set(We(t,e),r),r}function We(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Ye=new WeakMap,Ke=new WeakMap,Ve=new WeakSet,$e=function(){return t=function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),He(this,e=Ve),e.add(this),qe(this,Ye,null),qe(this,Ke,null)},r=[{key:"render",value:(o=De(Fe().mark((function t(){return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Je(Ke,this,JSON.parse(localStorage.getItem("user"))||{}),t.abrupt("return",(e=Re(Ke,this),'\n    <div class="ml-16 min-h-screen p-10">\n    <div class="max-w">\n      <h1 class="text-2xl font-semibold text-gray-900 mb-10">Profil</h1>\n          \n      <div class="mt-8">\n      <div class="flex items-center justify-between mb-8">\n        <div class="flex items-center gap-4">\n        <div class="w-24 h-24 rounded-full overflow-hidden">\n          <img src="'.concat(e.profilePicture||"/images/image.png",'" alt="Foto Profil" class="w-full h-full object-cover">\n        </div>\n        <div>\n          <div class="text-lg font-medium">').concat(e.name||"Nama Pengguna",'</div>\n        <div class="text-gray-500">@').concat(e.username||"namapengguna",'</div>\n      </div>\n      </div>\n                \n      <div class="flex gap-4">\n        <button id="editProfileBtn" class="w-25 border border-primary rounded-lg text-primary mt-2 justify-end">Sunting</button>\n        <button id="logoutBtn" class="w-25 bg-red-300 text-white py-2 rounded-lg mt-2 justify-end">Keluar</button>\n        </div>\n        </div>\n      </div>\n\n      <hr class="my-4 border-gray-300">\n\n      <div class="bg-none">\n        <h2 class="text-lg font-medium mb-4">Unggahan</h2>\n        <div id="user-stories-container" class="mt-6">\n        <p class="text-gray-500 text-center py-8">Belum ada unggahan</p>\n        </div>\n        </div>\n        </div>\n    </div>\n  ')));case 2:case"end":return t.stop()}var e}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=De(Fe().mark((function t(){return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Je(Ye,this,new Ae({view:this,authModel:e})),t.next=3,Re(Ye,this).loadUserProfile();case 3:We(Ve,this,Qe).call(this);case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"showUserStories",value:function(t){var e=this,r=document.getElementById("user-stories-container");r&&(0!==t.length?(r.innerHTML=t.map((function(t){var r,n,o=t.isAnonymous?"./images/image.png":Re(Ke,e).profilePicture||"./images/image.png";return l({username:t.isAnonymous?"Pengguna":Re(Ke,e).name,handle:t.isAnonymous?"Anonim":"@".concat(Re(Ke,e).username),content:t.content,isAnonymous:t.isAnonymous,storyId:t.id||t._id,likeCount:(null===(r=t.likes)||void 0===r?void 0:r.length)||0,commentCount:(null===(n=t.comments)||void 0===n?void 0:n.length)||0,viewCount:t.viewCount||0,profilePicture:o})})).join(""),Nt(Re(Ye,this))):r.innerHTML='<p class="text-gray-500 text-center py-8">Belum ada unggahan</p>')}},{key:"logoutSuccess",value:function(){window.location.hash="/login"}}],r&&ze(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n,o}();function Qe(){var t=this;document.getElementById("logoutBtn").addEventListener("click",(function(){Re(Ye,t).handleLogout()})),document.getElementById("editProfileBtn").addEventListener("click",(function(){var e=JSON.parse(localStorage.getItem("user"))||{};We(Ve,t,Xe).call(t,e)}))}function Xe(t){var e=this,r=document.getElementById("editProfileModal");r&&r.remove(),document.body.insertAdjacentHTML("beforeend",function(t){return'\n    <div id="editProfileModal" class="fixed inset-0 items-center justify-center bg-black/40 z-50 hidden">\n    <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md">\n    <div class="flex justify-between items-center mb-4">\n        <h3 class="text-lg font-semibold">Edit Profil</h3>\n        <button id="closeEditProfileModalBtn" class="text-gray-400 hover:text-gray-600 text-3xl">&times;</button>\n        </div>\n      <hr class="my-4 border-gray-300">\n        \n      <form id="editProfileForm" class="space-y-4">\n      <div>\n        <label class="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap</label>\n        <input type="text" name="name" value="'.concat(t.name||"",'" \n        class="w-full border border-gray-300 rounded-lg p-2">\n      </div>\n          \n      <div>\n        <label class="block text-sm font-medium text-gray-700 mb-1">Username</label>\n        <input type="text" name="username" value="').concat(t.username||"",'" \n        class="w-full border border-gray-300 rounded-lg p-2">\n        </div>\n          \n      <div>\n      <label class="block text-sm font-medium text-gray-700 mb-1">Foto Profil</label>\n      <div class="flex items-center gap-4">\n        <div class="w-16 h-16 rounded-full overflow-hidden border border-gray-300">\n          <img id="profileImagePreview" src="').concat(t.profilePicture||"/images/image.png",'" \n          alt="Preview Foto Profil" class="w-full h-full object-cover">\n          </div>\n          <input type="file" id="profilePictureInput" accept="image/*" class="hidden">\n          <button type="button" id="changePhotoBtn" \n            class="text-sm text-primary border border-primary rounded-lg px-3 py-1">\n            Ganti Foto\n        </button>\n      </div>\n      </div>\n          \n      <div class="flex justify-end gap-3 pt-4">\n      <button type="button" id="cancelEditBtn" \n        class="w-25 border border-gray-300 py-2 rounded-lg mt-2 justify-end text-gray-700">Batal</button>\n        <button type="submit" class="w-25 bg-third text-white py-2 rounded-lg mt-2 justify-end">Simpan</button>\n        </div>\n        </form>\n      </div>\n    </div>\n  ')}(t));var n=document.getElementById("editProfileModal"),o=document.getElementById("closeEditProfileModalBtn"),i=document.getElementById("cancelEditBtn"),a=document.getElementById("editProfileForm"),u=document.getElementById("changePhotoBtn"),s=document.getElementById("profilePictureInput"),c=document.getElementById("profileImagePreview");n.classList.remove("hidden"),n.classList.add("flex"),o.addEventListener("click",(function(){return We(Ve,e,Ze).call(e,n)})),i.addEventListener("click",(function(){return We(Ve,e,Ze).call(e,n)})),n.addEventListener("click",(function(t){t.target===n&&We(Ve,e,Ze).call(e,n)})),u.addEventListener("click",(function(){s.click()})),s.addEventListener("change",(function(t){var e=t.target.files[0];if(e){var r=new FileReader;r.onload=function(t){c.src=t.target.result},r.readAsDataURL(e)}})),a.addEventListener("submit",function(){var t=De(Fe().mark((function t(r){var o,i,u,c;return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),o=new FormData(a),i={name:o.get("name"),username:o.get("username")},!s.files[0]){t.next=11;break}if(!((u=s.files[0]).size>2097152)){t.next=8;break}return alert("Ukuran gambar terlalu besar. Maksimal 2MB"),t.abrupt("return");case 8:return t.next=10,We(Ve,e,tr).call(e,u);case 10:i.profilePicture=t.sent;case 11:return t.prev=11,t.next=14,Re(Ye,e).updateProfile(i);case 14:if(!(c=t.sent)||c.error){t.next=19;break}return We(Ve,e,Ze).call(e,n),t.next=19,Re(Ye,e).loadUserProfile();case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(11),alert(t.t0.message);case 24:case"end":return t.stop()}}),t,null,[[11,21]])})));return function(e){return t.apply(this,arguments)}}())}function Ze(t){t.classList.add("hidden"),t.classList.remove("flex"),setTimeout((function(){return t.remove()}),300)}function tr(t){return er.apply(this,arguments)}function er(){return(er=De(Fe().mark((function t(e){return Fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(t){return r(t)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rr(t){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rr(t)}function nr(){nr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==rr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(rr(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function or(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ir(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ar(n.key),n)}}function ar(t){var e=function(t){if("object"!=rr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=rr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rr(e)?e:e+""}function ur(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function sr(t,e){return t.get(lr(t,e))}function cr(t,e,r){return t.set(lr(t,e),r),r}function lr(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var fr=new WeakMap,hr=new WeakMap,dr=new WeakMap,pr=function(){return t=function t(e){var r=e.view,n=e.model,o=e.authModel;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ur(this,fr,void 0),ur(this,hr,void 0),ur(this,dr,void 0),cr(fr,this,r),cr(hr,this,n),cr(dr,this,o)},e=[{key:"getLogin",value:function(){var t,e=(t=nr().mark((function t(e){var r,n,o;return nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.usernameOrEmail,n=e.password,sr(fr,this).showSubmitLoadingButton(),t.prev=2,t.next=5,sr(hr,this).getLogin(r,n);case 5:(o=t.sent).error||o.status>=400?sr(fr,this).loginFailed(o.message):(localStorage.setItem("user",JSON.stringify(o.data)),sr(fr,this).loginSuccessfully(o.message),window.location.hash="#/",sr(dr,this).putAccessToken(o.data.token)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),sr(fr,this).loginFailed(t.t0.message);case 12:return t.prev=12,sr(fr,this).hideSubmitLoadingButton(),t.finish(12);case 15:case"end":return t.stop()}}),t,this,[[2,9,12,15]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){or(i,n,o,a,u,"next",t)}function u(t){or(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()}],e&&ir(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function vr(t){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vr(t)}function yr(){yr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==vr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(vr(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function mr(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function gr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){mr(i,n,o,a,u,"next",t)}function u(t){mr(i,n,o,a,u,"throw",t)}a(void 0)}))}}function wr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,br(n.key),n)}}function br(t){var e=function(t){if("object"!=vr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=vr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vr(e)?e:e+""}function xr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kr(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Er=new WeakMap,jr=new WeakSet,Sr=function(){return t=function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),xr(this,e=jr),e.add(this),function(t,e){xr(t,e),e.set(t,null)}(this,Er)},n=[{key:"render",value:(i=gr(yr().mark((function t(){return yr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n         <div class="flex items-center justify-center min-h-screen bg-white">\n            <div class="w-full max-w-xs">\n                <div class="flex items-center justify-center mb-4 gap-3">\n                    <img src="images/logo.png" alt="Logo" class="w-13 h-13 mb-2">\n                    <h1 class="text-2xl font-semibold text-gray-800 mb-2">MindBlown</h1>\n                </div>\n                <form id="login-form" class="bg-[#F7F7F7] rounded-xl shadow p-6 border border-gray-400">\n                    <p class="mb-3 text-gray-700 text-sm">Masuk untuk ngobrolin apa pun yang kamu rasakan.</p>\n                    <input id="email-input" placeholder="Email / Username" class="w-full mb-3 px-3 py-2 border border-gray-400 rounded-md focus:outline-none focus:ring" required>\n                    <input id="password-input" type="password" placeholder="Kata sandi" class="w-full mb-4 px-3 py-2 border border-gray-400 rounded-md focus:outline-none focus:ring" required>\n                    <div id="errorMessage" class="hidden text-red-500 text-center text-sm" role="alert"></div>\n\n                    <div id="submit-button-container" class="mt-3">\n                        <button class="w-full bg-third text-white text-sm py-2 rounded hover:bg-teal-600 transition" type="submit">Masuk</button>\n                    </div>\n                    \n                    <div class="flex justify-center mt-4">\n                        <p class="text-sm text-gray-500 ">Belum punya akun? <a href="#/register" class="text-third font-semibold hover:underline">Daftar</a></p>\n                    </div>\n                </form>\n            </div>\n        </div>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"afterRender",value:(o=gr(yr().mark((function t(){return yr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Er,o=new pr({view:this,model:r,authModel:e}),n.set(kr(n,this),o),kr(jr,this,Or).call(this);case 2:case"end":return t.stop()}var n,o}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"loginSuccessfully",value:function(t){console.log(t),location.hash="/"}},{key:"loginFailed",value:function(t){var e=document.getElementById("errorMessage");e.textContent=t,e.classList.remove("hidden"),setTimeout((function(){e.classList.add("hidden")}),3e3)}},{key:"showSubmitLoadingButton",value:function(){document.getElementById("submit-button-container").innerHTML='\n            <button class="w-full bg-teal-500 text-white text-sm py-2 rounded hover:bg-teal-600 transition flex items-center justify-center gap-2" type="submit" disabled>\n                Loading...\n            </button>\n        '}},{key:"hideSubmitLoadingButton",value:function(){document.getElementById("submit-button-container").innerHTML='\n            <button class="w-full bg-teal-500 text-white text-sm py-2 rounded hover:bg-teal-600 transition" type="submit">Masuk</button>\n        '}}],n&&wr(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o,i}();function Or(){var t=this;document.getElementById("login-form").addEventListener("submit",function(){var e=gr(yr().mark((function e(r){var n;return yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n={usernameOrEmail:document.getElementById("email-input").value,password:document.getElementById("password-input").value},e.next=4,(o=Er,i=t,o.get(kr(o,i))).getLogin(n);case 4:case"end":return e.stop()}var o,i}),e)})));return function(t){return e.apply(this,arguments)}}())}function Pr(t){return Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pr(t)}function _r(){_r=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Pr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Pr(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function Tr(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Ir(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nr(n.key),n)}}function Nr(t){var e=function(t){if("object"!=Pr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Pr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pr(e)?e:e+""}function Lr(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Gr(t,e){return t.get(Ar(t,e))}function Br(t,e,r){return t.set(Ar(t,e),r),r}function Ar(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Mr=new WeakMap,Fr=new WeakMap,Cr=function(){return t=function t(e){var r=e.view,n=e.model;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Lr(this,Mr,void 0),Lr(this,Fr,void 0),Br(Mr,this,r),Br(Fr,this,n)},e=[{key:"getRegistered",value:(r=_r().mark((function t(e){var r,n,o,i,a;return _r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.username,n=e.name,o=e.email,i=e.password,Gr(Mr,this).showSubmitLoadingButton(),t.prev=2,console.log(r,n,o,i),t.next=6,Gr(Fr,this).getRegister(r,n,o,i);case 6:(a=t.sent).error||a.status>=400?Gr(Mr,this).registeredFailed(a.message):Gr(Mr,this).registeredSuccessfully(a.message),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),Gr(Mr,this).registeredFailed(t.t0.message);case 13:return t.prev=13,Gr(Mr,this).hideSubmitLoadingButton(),t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[2,10,13,16]])})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){Tr(i,n,o,a,u,"next",t)}function u(t){Tr(i,n,o,a,u,"throw",t)}a(void 0)}))},function(t){return n.apply(this,arguments)})}],e&&Ir(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function Dr(t){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dr(t)}function zr(){zr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Dr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Dr(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function Ur(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function qr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ur(i,n,o,a,u,"next",t)}function u(t){Ur(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Hr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rr(n.key),n)}}function Rr(t){var e=function(t){if("object"!=Dr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dr(e)?e:e+""}function Jr(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wr(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Yr=new WeakMap,Kr=new WeakSet,Vr=function(){return t=function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Jr(this,e=Kr),e.add(this),function(t,e){Jr(t,e),e.set(t,null)}(this,Yr)},e=[{key:"render",value:(o=qr(zr().mark((function t(){return zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n        <div class="flex items-center justify-center min-h-screen bg-white">\n            <div class="w-full max-w-xs">\n                <div class="flex items-center justify-center mb-4 gap-3">\n                    <img src="images/logo.png" alt="Logo" class="w-13 h-13 mb-2">\n                    <h1 class="text-2xl font-semibold text-gray-800 mb-2">MindBlown</h1>\n                </div>\n                <form id="register-form" class="bg-[#F7F7F7] rounded-xl shadow p-5 border border-gray-400 sm:p-7">\n                    <p class="mb-3 text-gray-700 text-sm">Daftar untuk ngobrolin apa pun yang kamu rasakan.</p>\n                    <input id="username-input" type="text" placeholder="Nama Pengguna" class="w-full mb-3 px-3 py-2 border border-gray-400 rounded-md focus:outline-none focus:ring" required>\n                    <input id="name-input" type="text" placeholder="Nama Lengkap" class="w-full mb-3 px-3 py-2 border border-gray-400 rounded-md focus:outline-none focus:ring" required>\n                    <input id="email-input" type="email" placeholder="Email" class="w-full mb-3 px-3 py-2 border border-gray-400 rounded-md focus:outline-none focus:ring" required>\n                    <input id="password-input" type="password" placeholder="Kata sandi" class="w-full mb-3 px-3 py-2 border border-gray-400 rounded-md focus:outline-none focus:ring" required>\n                    <input id="passwordConfirm-input" type="password" placeholder="Konfirmasi kata sandi" class="w-full mb-4 px-3 py-2 border border-gray-400 rounded-md focus:outline-none focus:ring" required>\n\n                    <div id="errorMessage" class="hidden text-red-500 text-center text-sm" role="alert"></div>   \n\n                    <div id="submit-button-container" class="mt-3">\n                        <button class="w-full bg-third text-white text-sm py-2 rounded hover:bg-teal-600 transition" type="submit">Daftar</button>\n                    </div>\n                    <div class="flex justify-center mt-4">\n                        <p class="text-sm text-gray-500 ">Sudah punya akun? <a href="#/login" class="text-third font-semibold hover:underline">Masuk</a></p>\n                    </div>\n                </form>\n            </div>\n        </div>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(n=qr(zr().mark((function t(){return zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Yr,n=new Cr({view:this,model:r}),e.set(Wr(e,this),n),Wr(Kr,this,$r).call(this);case 2:case"end":return t.stop()}var e,n}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"registeredSuccessfully",value:function(t){console.log(t),location.hash="/login"}},{key:"registeredFailed",value:function(t){var e=document.getElementById("errorMessage");e.textContent=t,e.classList.remove("hidden"),setTimeout((function(){e.classList.add("hidden")}),3e3)}},{key:"showSubmitLoadingButton",value:function(){document.getElementById("submit-button-container").innerHTML='\n            <button class="w-full bg-teal-500 text-white text-sm py-2 rounded hover:bg-teal-600 transition" type="submit" disabled>\n                Loading...\n            </button>\n        '}},{key:"hideSubmitLoadingButton",value:function(){document.getElementById("submit-button-container").innerHTML='\n            <button class="w-full bg-teal-500 text-white text-sm py-2 rounded hover:bg-teal-600 transition" type="submit">\n                Daftar akun\n            </button>\n        '}}],e&&Hr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,o}();function $r(){var t=this;document.getElementById("register-form").addEventListener("submit",function(){var e=qr(zr().mark((function e(r){var n,o,i,a,u,s;return zr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=document.getElementById("username-input").value,o=document.getElementById("name-input").value,i=document.getElementById("email-input").value,a=document.getElementById("password-input").value,u=document.getElementById("passwordConfirm-input").value,a===u){e.next=9;break}return t.registeredFailed("Konfirmasi kata sandi tidak sama dengan kata sandi!"),e.abrupt("return");case 9:return s={username:n,name:o,email:i,password:a},e.next=12,(c=Yr,l=t,c.get(Wr(c,l))).getRegistered(s);case 12:case"end":return e.stop()}var c,l}),e)})));return function(t){return e.apply(this,arguments)}}())}function Qr(t){return Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qr(t)}function Xr(){Xr=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Qr(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Qr(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function Zr(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function tn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Zr(i,n,o,a,u,"next",t)}function u(t){Zr(i,n,o,a,u,"throw",t)}a(void 0)}))}}function en(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rn(n.key),n)}}function rn(t){var e=function(t){if("object"!=Qr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qr(e)?e:e+""}var nn=new WeakSet,on=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}(this,nn),this.sessionId=localStorage.getItem("sessionId")||function(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}(nn,this,an).call(this),localStorage.setItem("sessionId",this.sessionId)},e=[{key:"render",value:(n=tn(Xr().mark((function t(){return Xr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n       <section class="ml-0 md:ml-8 lg:ml-16 min-h-screen flex">\n        <div class="w-full flex items-center pb-20"> \n            <div class="max-w-2xl w-full mx-auto text-center">\n                \n                <div id="chat-container" class="flex flex-col gap-2 px-6 lg:px-4 overflow-y-auto max-h-[75vh] md:max-h[80vh] lg:max-h-[75vh]">\n                </div>\n                \n                <form id="chat-form" class="fixed bottom-24 lg:bottom-6 z-50 w-full lg:w-full md:max-w-2xl lg:max-w-2xl mx-auto px-4 lg:px-0 flex gap-2">\n                    <textarea \n                      id="chat-input"\n                      class="text-[#8c8c8c] w-full h-16 md:h-20 lg:h-24 px-4 py-3 pr-14 rounded-3xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent overflow-hidden placeholder:leading-[2rem] md:placeholder:leading-[3rem] lg:placeholder:leading-[4rem]"\n                      placeholder="Cerita sedikit..."></textarea>\n                    <button class="absolute right-6 lg:right-3 top-1/2 transform -translate-y-1/2 rounded-full bg-[#eee] p-2 flex items-center justify-center hover:bg-third focus:bg-third transition cursor-pointer">\n                        <svg xmlns="http://www.w3.org/2000/svg"  class="w-6 h-6 text-white" fill="none" viewBox="-0.5 -0.5 16 16" stroke-linecap="round" stroke-linejoin="round" stroke="white" id="Send--Streamline-Mynaui" height="16" width="16">\n                        <path d="m8.75 6.25 -1.875 1.875m5.805 -6.230625a0.33437500000000003 0.33437500000000003 0 0 1 0.42500000000000004 0.42562500000000003l-3.7025 10.58125a0.33437500000000003 0.33437500000000003 0 0 1 -0.62125 0.025l-2.011875 -4.52625a0.33375 0.33375 0 0 0 -0.169375 -0.169375l-4.52625 -2.0125a0.33437500000000003 0.33437500000000003 0 0 1 0.025 -0.620625z" stroke-width="1"></path>\n                    </svg>\n                    </button>\n                </form>\n            </div>\n        </div>\n      </section>\n        ');case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(r=tn(Xr().mark((function t(){var e,r,n,i,s;return Xr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=function(){requestAnimationFrame((function(){e.scrollTop=e.scrollHeight}))},e=document.getElementById("chat-container"),r=document.getElementById("chat-form"),(n=document.getElementById("chat-input")).addEventListener("input",(function(){return o(n)})),(s=localStorage.getItem("pendingChatMessage"))&&(e.insertAdjacentHTML("beforeend",a(s)),localStorage.removeItem("pendingChatMessage"),i(),setTimeout((function(){e.insertAdjacentHTML("beforeend",u("Hai, terima kasih sudah cerita! Aku di sini untuk mendengarkan.")),i()}),500)),r.addEventListener("submit",function(){var t=tn(Xr().mark((function t(r){var o;return Xr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),o=n.value.trim()){t.next=4;break}return t.abrupt("return");case 4:e.insertAdjacentHTML("beforeend",a(o)),i(),n.value="",n.style.height="",setTimeout(tn(Xr().mark((function t(){return Xr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.insertAdjacentHTML("beforeend",u("Ini balasan dari bot ipsom lorem alemet aku anjay mabar!")),i();case 3:case"end":return t.stop()}}),t)}))),1e3);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}],e&&en(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function an(){return Date.now().toString(36)+Math.random().toString(36).substr(2,9)}function un(t){return un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},un(t)}function sn(){sn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==un(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(un(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function cn(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ln(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){cn(i,n,o,a,u,"next",t)}function u(t){cn(i,n,o,a,u,"throw",t)}a(void 0)}))}}function fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hn(n.key),n)}}function hn(t){var e=function(t){if("object"!=un(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=un(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==un(e)?e:e+""}var dn=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._storyId=e,this._presenter=new Pt(this)},e=[{key:"render",value:(n=ln(sn().mark((function t(){var e,r,n,o;return sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this._presenter.getCurrentUser(),r=(null==e?void 0:e.name)||"Nama Pengguna",n=null!=e&&e.username?"@".concat(e.username):"@namapengguna",o=(null==e?void 0:e.profilePicture)||"./images/image.png",t.abrupt("return",'\n    <div class="ml-16 min-h-screen p-10">\n      <div class="mb-1">\n        <h1 class="text-2xl font-semibold text-gray-900 mb-2">Detail Story</h1>\n        <p class="text-gray-600">Cerita lengkap dan komentar.</p>\n        <hr class="mt-4 text-gray-300">\n      </div>\n\n      <div class="grid grid-cols-2 gap-4 h-screen">\n        <div class="overflow-y-auto p-6 mr-10 border-gray-200">\n          <div id="story-detail-container" class="space-y-6"></div>\n          <div id="comments-container" class="mt-8 space-y-6">\n            <h3 class="text-lg font-semibold text-gray-900 mb-4">Komentar</h3>\n            <div id="comments-list" class="space-y-4"></div>\n          </div>\n        </div>\n\n        <div class="p-6">\n          <div class="space-y-6 mt-4">\n            '.concat(h({username:r,handle:n,profilePicture:o}),"\n          </div>\n        </div>\n      </div>\n    </div>\n    "));case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(r=ln(sn().mark((function t(){return sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._presenter.loadStoryDetail(this._storyId);case 2:this.setupEventListeners();case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"showStoryDetail",value:function(t){var e=document.getElementById("story-detail-container");e&&(e.innerHTML=l({username:t.isAnonymous?"Pengguna":t.name,handle:t.isAnonymous?"Anonim":"@".concat(t.username),content:t.content,isAnonymous:t.isAnonymous,likeCount:t.likeCount,commentCount:t.commentCount,viewCount:t.viewCount,storyId:t._id,profilePicture:t.profilePicture})),t.comments&&t.comments.length>0&&this.showComments(t.comments)}},{key:"showComments",value:function(t){var e=document.getElementById("comments-list");e&&(e.innerHTML=t.map((function(t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.username,r=void 0===e?"Pengguna":e,n=t.content,o=void 0===n?"":n,i=t.timestamp,a=void 0===i?"":i,u=t.profilePicture,s=void 0===u?"./images/image.png":u,c=new Date(a).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});return'\n    <div class="comment-container flex items-start gap-3 py-3 border-b border-gray-200">\n      <div class="w-10 h-10 flex-shrink-0">\n        <img src="'.concat(s,'" alt="icon" class="w-10 h-10 object-cover rounded-full" />\n      </div>\n\n      <div class="flex flex-col text-left">\n        <div class="font-semibold text-base text-gray-800">').concat(r,'</div>\n        <p class="text-gray-700 mt-1 text-sm leading-relaxed">').concat(o,'</p>\n        <div class="text-xs text-gray-500 mt-1">').concat(c,"</div>\n      </div>\n    </div>\n  ")}({username:t.username||"Pengguna",content:t.content,timestamp:t.createdAt||(new Date).toISOString(),profilePicture:t.profilePicture||"./images/image.png"})})).join(""))}},{key:"setupEventListeners",value:function(){var t=this,e=document.getElementById("comment-form");e&&e.addEventListener("submit",function(){var r=ln(sn().mark((function r(n){var o,i;return sn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),o=document.getElementById("comment-input"),(i=e.querySelector('button[type="submit"]')).disabled=!0,i.textContent="Mengunggah...",r.prev=5,null==o||!o.value.trim()){r.next=17;break}return r.next=9,t._presenter.addComment(t._storyId,o.value.trim());case 9:if(!r.sent){r.next=15;break}return o.value="",t._showToast("Komentar berhasil ditambahkan!"),r.next=15,t._presenter.loadStoryDetail(t._storyId);case 15:r.next=18;break;case 17:alert("Silakan masukkan komentar");case 18:r.next=24;break;case 20:r.prev=20,r.t0=r.catch(5),console.error("Error submitting comment:",r.t0),alert("Gagal mengunggah komentar: "+r.t0.message);case 24:return r.prev=24,i.disabled=!1,i.textContent="Unggah",r.finish(24);case 28:case"end":return r.stop()}}),r,null,[[5,20,24,28]])})));return function(t){return r.apply(this,arguments)}}())}},{key:"_showToast",value:function(t){var e=document.createElement("div");e.className="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded",e.textContent=t,document.body.appendChild(e),setTimeout((function(){e.remove()}),3e3)}},{key:"showError",value:function(t){var e=document.getElementById("story-detail-container");e&&(e.innerHTML='\n      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">\n        <strong>Error!</strong> '.concat(t,"\n      </div>\n    "))}}],e&&fn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function pn(t){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(t)}function vn(){vn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==pn(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(pn(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function yn(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function mn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yn(i,n,o,a,u,"next",t)}function u(t){yn(i,n,o,a,u,"throw",t)}a(void 0)}))}}function gn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wn(n.key),n)}}function wn(t){var e=function(t){if("object"!=pn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=pn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pn(e)?e:e+""}var bn=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title="404 - Halaman Tidak Ditemukan"},e=[{key:"render",value:(n=mn(vn().mark((function t(){return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="min-h-screen flex items-center justify-center bg-gray-50">\n        <div class="text-center px-6 py-12 max-w-md mx-auto">\n          <div class="mb-8">\n            <div class="text-9xl font-bold text-third mb-6">404</div>\n          </div>\n\n          <h1 class="text-3xl font-bold text-gray-900 mb-4">\n            Halaman Tidak Ditemukan\n          </h1>\n          \n          <p class="text-gray-600 mb-8 leading-relaxed">\n            Maaf, halaman yang Anda cari tidak dapat ditemukan.\n          </p>\n\n          <div class="space-y-4">\n            <button \n              id="go-home" \n              class="w-full bg-third text-white py-3 px-6 rounded-lg font-medium hover:bg-third/90 transition-colors">\n              Kembali ke Beranda\n            </button>\n            \n            <button \n              id="go-back" \n              class="w-full border border-gray-300 text-gray-700 py-3 px-6 rounded-lg font-medium hover:bg-gray-50 transition-colors">\n              Kembali ke Halaman Sebelumnya\n            </button>\n          </div>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(r=mn(vn().mark((function t(){return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.attachEventListeners();case 1:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"attachEventListeners",value:function(){var t=document.getElementById("go-home"),e=document.getElementById("go-back");t&&t.addEventListener("click",(function(){window.location.hash="#/"})),e&&e.addEventListener("click",(function(){window.history.length>1?window.history.back():window.location.hash="#/"}))}}],e&&gn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();const xn={"/login":function(){return b(new Sr)},"/register":function(){return b(new Vr)},"/":function(){return new L},"/story":function(){return k(new qt)},"/calendar":function(){return k(new oe)},"/notification":function(){return k(new ge)},"/profile":function(){return k(new $e)},"/chatbot":function(){return new on},"/story/:id":function(t){return k(new dn(t))},"/404":function(){return new bn}};function kn(t){return kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(t)}function En(){En=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==kn(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(kn(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function jn(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Sn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){jn(i,n,o,a,u,"next",t)}function u(t){jn(i,n,o,a,u,"throw",t)}a(void 0)}))}}function On(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pn(n.key),n)}}function Pn(t){var e=function(t){if("object"!=kn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kn(e)?e:e+""}function _n(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function Tn(t,e){return t.get(Nn(t,e))}function In(t,e,r){return t.set(Nn(t,e),r),r}function Nn(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Ln=new WeakMap,Gn=new WeakMap,Bn=new WeakMap,An=new WeakMap,Mn=new WeakMap,Fn=new WeakMap;const Cn=function(){return t=function t(e){var r=e.content,n=e.sidebar,o=e.sidebarToggle,i=e.sidebarToggleIcon,a=e.sidebarToggleContainer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_n(this,Ln,null),_n(this,Gn,null),_n(this,Bn,null),_n(this,An,null),_n(this,Mn,null),_n(this,Fn,!1),In(Ln,this,r),In(Gn,this,n),In(Bn,this,o),In(An,this,i),In(Mn,this,a),this.setupSidebarToggle(),this.setupNavigationLinks()},e=[{key:"setupSidebarToggle",value:function(){var t=this;Tn(Bn,this)&&Tn(An,this)&&Tn(Gn,this)&&Tn(Bn,this).addEventListener("click",(function(){console.log("clicked"),In(Fn,t,!Tn(Fn,t)),Tn(Fn,t)?t.expandSidebar():t.collapseSidebar()}))}},{key:"setupNavigationLinks",value:function(){var t=this;document.querySelectorAll("nav a").forEach((function(e){e.addEventListener("click",(function(){Tn(Fn,t)&&t.collapseSidebar()}))}));var e=document.querySelector('a[href="#/"]');e&&e.addEventListener("click",(function(){Tn(Fn,t)&&t.collapseSidebar()})),this.updateActiveNavLink()}},{key:"collapseSidebar",value:function(){In(Fn,this,!1),Tn(Gn,this).classList.remove("w-56"),Tn(Gn,this).classList.add("w-16"),Tn(Mn,this).classList.remove("ml-54"),Tn(An,this).innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M24 24H0V0h24v24z" fill="none" opacity=".87"/><path d="M7.38 21.01c.49.49 1.28.49 1.77 0l8.31-8.31c.39-.39.39-1.02 0-1.41L9.15 2.98c-.49-.49-1.28-.49-1.77 0s-.49 1.28 0 1.77L14.62 12l-7.25 7.25c-.48.48-.48 1.28.01 1.76z"/></svg>',document.querySelectorAll(".sidebar-label").forEach((function(t){return t.classList.add("hidden")}))}},{key:"expandSidebar",value:function(){In(Fn,this,!0),Tn(Gn,this).classList.remove("w-16"),Tn(Gn,this).classList.add("w-56"),Tn(Mn,this).classList.add("ml-54"),Tn(An,this).innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M24 24H0V0h24v24z" fill="none" opacity=".87"/><path d="M16.62 2.99c-.49-.49-1.28-.49-1.77 0l-8.31 8.31c-.39.39-.39 1.02 0 1.41l8.31 8.31c.49.49 1.28.49 1.77 0s.49-1.28 0-1.77L9.38 12l7.25-7.25c.48-.48.48-1.28-.01-1.76z"/></svg>',document.querySelectorAll(".sidebar-label").forEach((function(t){return t.classList.remove("hidden")}))}},{key:"updateActiveNavLink",value:function(){var t=window.location.hash||"#/";document.querySelectorAll("nav a").forEach((function(e){var r=e.getAttribute("href"),n=e.querySelector("svg");r===t?(e.classList.add("text-[#00ADB5]"),n&&n.classList.add("text-[#00ADB5]")):(e.classList.remove("text-[#00ADB5]"),n&&n.classList.remove("text-[#00ADB5]"))}))}},{key:"renderPage",value:(r=Sn(En().mark((function t(){var e,r,o,i,a=this;return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=d(),(r=xn[e])||(r=xn["/404"]),o=r()){t.next=6;break}return t.abrupt("return");case 6:i=n({updateDOM:function(){var t=Sn(En().mark((function t(){return En().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.render();case 2:Tn(Ln,a).innerHTML=t.sent,o.afterRender(),a.updateActiveNavLink();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}),i.ready.catch(console.error),i.updateCallbackDone.then((function(){scrollTo({top:0,behavior:"instant"})}));case 9:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}],e&&On(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Dn(t){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(t)}function zn(){zn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof h?r:h,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=p.prototype=h.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==Dn(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){this.tryEntries.push(t)}function E(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Dn(e)+" is not iterable")}return d.prototype=p,s(g,"constructor",p),s(p,"constructor",d),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),E(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;E(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),f}},e}function Un(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function qn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Un(i,n,o,a,u,"next",t)}function u(t){Un(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Hn(){var t=window.location.hash.replace("#","")||"/",e=document.getElementById("navbar-container"),r=document.getElementById("mobile-navbar"),n=d(),o=void 0!==xn[n];["/login","/register","/404"].includes(t)||!o?(e&&(e.style.display="none"),r&&(r.style.display="none")):(e&&(e.style.display=""),r&&(r.style.display=""))}document.addEventListener("DOMContentLoaded",qn(zn().mark((function t(){var e;return zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Cn({content:document.querySelector("#main-content"),sidebar:document.querySelector("#sidebar"),sidebarToggle:document.querySelector("#sidebar-toggle"),sidebarToggleIcon:document.querySelector("#sidebar-toggle-icon"),sidebarToggleContainer:document.querySelector("#sidebar-toggle-container")}),t.next=3,e.renderPage();case 3:Hn(),window.addEventListener("hashchange",qn(zn().mark((function t(){return zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.renderPage();case 2:Hn();case 3:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t)}))))})();